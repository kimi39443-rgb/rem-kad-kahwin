<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Panel - Kad Kahwin</title>
  <style>
    :root{--accent:#d6b36a}
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    body{min-height:100vh;background:#0b0b0c;color:#fff;padding:16px}
    .wrap{width:min(860px,100%);margin:0 auto}
    .card{
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      border-radius:22px;
      padding:16px;
      box-shadow:0 20px 70px rgba(0,0,0,.55);
      backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);
    }
    h1{font-size:20px;margin-bottom:6px}
    p{opacity:.85;font-size:13px;line-height:1.55;margin-bottom:12px}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    .field{grid-column:span 12}
    @media(min-width:760px){ .field.half{grid-column:span 6} }
    label{display:block;font-size:12px;opacity:.85;margin:10px 0 6px}
    input,textarea,select{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(0,0,0,.30);
      color:#fff;
      outline:none;
    }
    textarea{min-height:90px;resize:vertical}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn{
      padding:12px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.10);color:#fff;font-weight:900;cursor:pointer
    }
    .btnPrimary{background:var(--accent);color:#1b1b1b;border:none}
    .note{opacity:.75;font-size:12px;line-height:1.5;margin-top:10px}
    .lock{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:18px;background:rgba(0,0,0,.75);z-index:50}
    .lockCard{width:min(520px,100%);border-radius:22px;padding:18px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14)}
    .tiny{font-size:12px;opacity:.8;margin-top:8px}
    .preview{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:10px}
    .avatar{width:74px;height:74px;border-radius:18px;overflow:hidden;border:1px solid rgba(255,255,255,.14);background:rgba(0,0,0,.25)}
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .toggle{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px;border-radius:16px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06)}
    .toggle b{font-size:13px}
  </style>
</head>
<body>

<div class="lock" id="lock">
  <div class="lockCard">
    <h1>Admin Login</h1>
    <p>Masukkan password untuk buka panel edit.</p>
    <label>Password</label>
    <input id="pw" type="password" placeholder="contoh: admin123" />
    <div class="row">
      <button class="btnPrimary btn" id="btnLogin">Buka Admin</button>
      <button class="btn" onclick="location.href='invite.html'">Pergi Jemputan</button>
    </div>
    <div class="tiny">Nota: password ini hanya kunci UI (GitHub Pages tiada server).</div>
  </div>
</div>

<div class="wrap">
  <div class="card">
    <h1>Edit Maklumat Jemputan (Premium)</h1>
    <p>Isi → tekan <b>Simpan</b>. Lepas itu buka <b>invite.html</b> untuk lihat perubahan.</p>

    <div class="grid">

      <div class="field half">
        <label>Bahasa</label>
        <select id="lang">
          <option value="ms">BM (Malay)</option>
          <option value="en">EN (English)</option>
        </select>
      </div>

      <div class="field half">
        <label>Tema</label>
        <select id="theme">
          <option value="gold">Gold (Premium)</option>
          <option value="rose">Rose</option>
          <option value="emerald">Emerald</option>
          <option value="midnight">Midnight</option>
        </select>
      </div>

      <div class="field half">
        <div class="toggle">
          <b>Video Background</b>
          <select id="videoOn">
            <option value="false">OFF</option>
            <option value="true">ON</option>
          </select>
        </div>
      </div>

      <div class="field half">
        <div class="toggle">
          <b>VIP Lock</b>
          <select id="vipOn">
            <option value="false">OFF</option>
            <option value="true">ON</option>
          </select>
        </div>
      </div>

      <div class="field">
        <label>Kod VIP (jika VIP ON)</label>
        <input id="vipCode" placeholder="Contoh: VIP123" />
      </div>

      <div class="field half">
        <label>Top Title (atas)</label>
        <input id="topTitle" placeholder="Kad Kahwin Digital" />
      </div>

      <div class="field half">
        <label>Top Subtitle (atas)</label>
        <input id="topSubtitle" placeholder="Jemputan Rasmi" />
      </div>

      <div class="field half">
        <label>Badge (contoh: WEDDING INVITATION)</label>
        <input id="badgeText" placeholder="WEDDING INVITATION" />
      </div>

      <div class="field half">
        <label>Salutation (contoh: Dato’/Datin/Tuan/Puan/Encik/Cik)</label>
        <input id="salutation" placeholder="Dato’/Datin/Tuan/Puan/Encik/Cik" />
      </div>

      <div class="field">
        <label>Tajuk</label>
        <input id="title" placeholder="Walimatul Urus" />
      </div>

      <div class="field">
        <label>Nama Pengantin</label>
        <input id="couple" placeholder="Adam & Hawa" />
      </div>

      <div class="field">
        <label>Ayat Jemputan</label>
        <textarea id="message" placeholder="Dengan penuh kesyukuran..."></textarea>
      </div>

      <div class="field half">
        <label>Tarikh (DD/MM/YYYY)</label>
        <input id="date" placeholder="01/12/2025" />
      </div>

      <div class="field half">
        <label>Masa (contoh: 9.00am – 2.00pm)</label>
        <input id="time" placeholder="9.00am – 2.00pm" />
      </div>

      <div class="field half">
        <label>Tempat / Dewan</label>
        <input id="venue" placeholder="Dewan Serbaguna" />
      </div>

      <div class="field half">
        <label>Alamat ringkas</label>
        <input id="address" placeholder="Alamat ringkas majlis di sini" />
      </div>

      <div class="field half">
        <label>Link Google Maps</label>
        <input id="maps" placeholder="https://maps.google.com/..." />
      </div>

      <div class="field half">
        <label>Link WhatsApp RSVP</label>
        <input id="rsvp" placeholder="https://wa.me/60....?text=..." />
      </div>

      <div class="field">
        <label>Aturcara (ringkas)</label>
        <textarea id="schedule" placeholder="11:00 pagi - Ketibaan tetamu..."></textarea>
      </div>

      <div class="field">
        <label>Galeri (link/ayat)</label>
        <textarea id="gallery" placeholder="Letak link album..."></textarea>
      </div>

      <div class="field">
        <label>Notis / Copyright</label>
        <input id="copyright" placeholder="Notis: Dilarang guna/ jual page ini tanpa kebenaran pemilik." />
      </div>

      <div class="field">
        <label>Foto (Upload – simpan dalam browser sahaja)</label>
        <input id="photoFile" type="file" accept="image/*" />
        <div class="preview">
          <div class="avatar"><img id="photoPreview" alt="preview"/></div>
          <button class="btn" id="btnClearPhoto" type="button">Buang Foto</button>
        </div>
        <div class="note">Foto ini disimpan sebagai base64 dalam localStorage (bukan upload ke GitHub).</div>
      </div>
    </div>

    <div class="row">
      <button class="btnPrimary btn" id="btnSave">Simpan</button>
      <button class="btn" id="btnOpenInvite" type="button">Buka invite.html</button>
      <button class="btn" id="btnOpenIndex" type="button">Buka index.html</button>
      <button class="btn" id="btnReset" type="button">Reset Default</button>
    </div>

    <div class="note">
      Jika perubahan tak nampak: buka invite.html → tekan <b>3 titik</b> → <b>Refresh</b> / <b>Clear cache</b>, atau tambah <b>?v=1</b> di hujung URL.
    </div>
  </div>
</div>

<script>
  // ====== PASSWORD (TUKAR DI SINI) ======
  const ADMIN_PASSWORD = "admin123"; // <- tukar password anda di sini

  // ====== DATA STORAGE KEY ======
  const KEY = "KADKAHWIN_DATA_V10";

  const DEFAULT_DATA = {
    lang:"ms",
    theme:"gold",
    videoOn:false,
    vipOn:false,
    vipCode:"VIP123",
    topTitle:"Kad Kahwin Digital",
    topSubtitle:"Jemputan Rasmi",
    badgeText:"WEDDING INVITATION",
    salutation:"Dato’/Datin/Tuan/Puan/Encik/Cik",
    title:"Walimatul Urus",
    couple:"Adam & Hawa",
    message:"Dengan penuh kesyukuran, kami menjemput anda hadir memeriahkan majlis perkahwinan kami.",
    date:"01/12/2025",
    time:"9.00am – 2.00pm",
    venue:"Dewan Serbaguna",
    address:"Alamat ringkas majlis di sini",
    maps:"https://maps.google.com/",
    rsvp:"https://wa.me/60123456789?text=Assalamualaikum,%20saya%20nak%20RSVP",
    schedule:"11:00 pagi - Ketibaan tetamu • 12:30 tgh - Ketibaan pengantin • 2:00 ptg - Majlis tamat",
    gallery:"Letak link album atau info galeri di admin panel.",
    photoDataUrl:"",
    copyright:"Notis: Dilarang guna/ jual page ini tanpa kebenaran pemilik."
  };

  function loadData(){
    try{
      const raw = localStorage.getItem(KEY);
      return raw ? Object.assign({}, DEFAULT_DATA, JSON.parse(raw)) : DEFAULT_DATA;
    }catch(e){ return DEFAULT_DATA; }
  }
  function saveData(d){ localStorage.setItem(KEY, JSON.stringify(d)); }

  // ====== LOGIN ======
  const lock = document.getElementById("lock");
  document.getElementById("btnLogin").onclick = () => {
    const pw = document.getElementById("pw").value || "";
    if(pw === ADMIN_PASSWORD){
      lock.style.display = "none";
      hydrateForm();
    }else{
      alert("Password salah.");
    }
  };

  // ====== FORM HELPERS ======
  const $ = (id)=>document.getElementById(id);
  function setVal(id,val){ $(id).value = (val ?? ""); }
  function getVal(id){ return $(id).value; }
  function getBool(id){ return getVal(id) === "true"; }

  // ====== PHOTO ======
  function setPreview(dataUrl){
    const img = $("photoPreview");
    img.src = dataUrl || "";
  }

  async function fileToDataUrl(file){
    return new Promise((resolve,reject)=>{
      const r = new FileReader();
      r.onload = ()=>resolve(r.result);
      r.onerror = reject;
      r.readAsDataURL(file);
    });
  }

  // ====== HYDRATE ======
  function hydrateForm(){
    const d = loadData();
    setVal("lang", d.lang);
    setVal("theme", d.theme);
    setVal("videoOn", String(!!d.videoOn));
    setVal("vipOn", String(!!d.vipOn));
    setVal("vipCode", d.vipCode);

    setVal("topTitle", d.topTitle);
    setVal("topSubtitle", d.topSubtitle);
    setVal("badgeText", d.badgeText);
    setVal("salutation", d.salutation);

    setVal("title", d.title);
    setVal("couple", d.couple);
    setVal("message", d.message);

    setVal("date", d.date);
    setVal("time", d.time);
    setVal("venue", d.venue);
    setVal("address", d.address);

    setVal("maps", d.maps);
    setVal("rsvp", d.rsvp);

    setVal("schedule", d.schedule);
    setVal("gallery", d.gallery);

    setVal("copyright", d.copyright);

    setPreview(d.photoDataUrl);
  }

  // ====== SAVE ======
  $("btnSave").onclick = () => {
    const d = loadData();
    d.lang = getVal("lang");
    d.theme = getVal("theme");
    d.videoOn = getBool("videoOn");
    d.vipOn = getBool("vipOn");
    d.vipCode = getVal("vipCode").trim() || DEFAULT_DATA.vipCode;

    d.topTitle = getVal("topTitle").trim();
    d.topSubtitle = getVal("topSubtitle").trim();
    d.badgeText = getVal("badgeText").trim();
    d.salutation = getVal("salutation").trim();

    d.title = getVal("title").trim();
    d.couple = getVal("couple").trim();
    d.message = getVal("message").trim();

    d.date = getVal("date").trim();
    d.time = getVal("time").trim();
    d.venue = getVal("venue").trim();
    d.address = getVal("address").trim();

    d.maps = getVal("maps").trim();
    d.rsvp = getVal("rsvp").trim();

    d.schedule = getVal("schedule").trim();
    d.gallery = getVal("gallery").trim();

    d.copyright = getVal("copyright").trim();

    saveData(d);
    alert("✅ Berjaya simpan! Sekarang buka invite.html untuk lihat perubahan.");
  };

  $("btnOpenInvite").onclick = () => location.href = "invite.html";
  $("btnOpenIndex").onclick = () => location.href = "index.html";

  $("btnReset").onclick = () => {
    if(confirm("Reset semua data ke default?")){
      saveData(DEFAULT_DATA);
      hydrateForm();
      alert("Reset siap. Buka invite.html untuk lihat.");
    }
  };

  // Photo upload
  $("photoFile").addEventListener("change", async (e)=>{
    const file = e.target.files && e.target.files[0];
    if(!file) return;
    const d = loadData();
    const dataUrl = await fileToDataUrl(file);
    d.photoDataUrl = dataUrl;
    saveData(d);
    setPreview(dataUrl);
    alert("Foto disimpan (device ini).");
  });

  $("btnClearPhoto").onclick = ()=>{
    const d = loadData();
    d.photoDataUrl = "";
    saveData(d);
    setPreview("");
    alert("Foto dibuang.");
  };
</script>
</body>
</html>
