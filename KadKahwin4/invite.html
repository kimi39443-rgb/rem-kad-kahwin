<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jemputan Rasmi</title>

  <style>
    :root{
      --bg:#0b0b0f;
      --card: rgba(255,255,255,.10);
      --card2: rgba(255,255,255,.08);
      --bd: rgba(255,255,255,.14);
      --txt:#fff;
      --mut: rgba(255,255,255,.78);
      --mut2: rgba(255,255,255,.62);
      --btn:#ffffff;
      --btnTxt:#111;
      --chip: rgba(255,255,255,.12);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --r: 22px;
    }

    *{box-sizing:border-box;font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    body{
      margin:0;
      color:var(--txt);
      background:var(--bg);
      min-height:100vh;
      overflow-x:hidden;
    }

    /* VIDEO BG */
    #bgVideo{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      z-index:-3;
      background:#000;
    }
    .overlay{
      position:fixed;
      inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.60));
      z-index:-2;
    }
    .grain{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:-1;
      opacity:.10;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
    }

    /* TAP TO PLAY (autoplay fix) */
    #tapToPlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.72);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:50;
      padding:20px;
    }
    #tapToPlay.hide{display:none}
    .tapCard{
      width:min(520px,100%);
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.16);
      border-radius: 20px;
      box-shadow: var(--shadow);
      padding:18px;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      text-align:center;
    }
    .tapTitle{font-weight:800;font-size:18px;margin-bottom:6px}
    .tapDesc{font-size:13px;line-height:1.55;color:var(--mut);margin-bottom:12px}
    .tapBtn{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.14);
      color:#fff;
      padding:12px 18px;
      border-radius:999px;
      font-weight:800;
      cursor:pointer;
    }
    .tapBtn:active{transform:scale(.98)}

    /* LAYOUT */
    .wrap{
      width:min(980px,100%);
      margin:0 auto;
      padding:18px;
      padding-bottom:28px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-top:6px;
      margin-bottom:14px;
    }
    .brand{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .brand b{font-size:18px;letter-spacing:.2px}
    .brand span{font-size:13px;color:var(--mut2)}
    .pill{
      display:flex;
      align-items:center;
      gap:10px;
      background: var(--card2);
      border:1px solid var(--bd);
      padding:10px 12px;
      border-radius:999px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      color:var(--mut);
      font-size:13px;
    }

    .hero{
      background: var(--card);
      border:1px solid var(--bd);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      padding:18px;
      overflow:hidden;
      position:relative;
    }
    .hero::before{
      content:"";
      position:absolute;
      inset:-40px;
      background: radial-gradient(circle at 20% 0%, rgba(255,255,255,.12), transparent 60%),
                  radial-gradient(circle at 100% 50%, rgba(255,255,255,.08), transparent 55%);
      pointer-events:none;
    }
    .heroInner{position:relative}

    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background: var(--chip);
      border:1px solid rgba(255,255,255,.16);
      text-transform:uppercase;
      letter-spacing:1px;
      font-size:12px;
      color:var(--mut);
      margin-bottom:10px;
    }
    .title{
      font-size:38px;
      line-height:1.1;
      margin:0 0 10px;
      letter-spacing:.2px;
      font-weight:900;
    }
    .msg{
      margin:0 0 12px;
      color:var(--mut);
      line-height:1.55;
      font-size:14.5px;
    }
    .coupleBox{
      margin-top:10px;
      padding:14px 14px;
      border-radius: 18px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.14);
      text-align:center;
    }
    .couple{
      font-size:28px;
      font-weight:900;
      letter-spacing:.2px;
      margin:0;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
      align-items:center;
    }
    .btn{
      border:none;
      background: var(--btn);
      color: var(--btnTxt);
      padding:12px 16px;
      border-radius: 999px;
      font-weight:900;
      cursor:pointer;
    }
    .btn:active{transform:scale(.98)}
    .btn.secondary{
      background: rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.16);
      color:#fff;
    }
    .btn.small{padding:10px 14px;font-weight:800}

    .split{
      margin-top:14px;
      height:1px;
      background: rgba(255,255,255,.12);
    }

    /* countdown */
    .cdTitle{
      margin:14px 0 10px;
      color:var(--mut);
      font-weight:800;
    }
    .countdown{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:10px;
    }
    @media(max-width:560px){.countdown{grid-template-columns:repeat(2,1fr)}}
    .cdBox{
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      border-radius:18px;
      padding:12px;
      text-align:center;
    }
    .cdNum{font-size:28px;font-weight:900}
    .cdLbl{font-size:12px;color:var(--mut2);letter-spacing:1px;text-transform:uppercase}

    /* tabs */
    .tabsWrap{
      margin-top:16px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      border-radius: var(--r);
      overflow:hidden;
      box-shadow: 0 12px 40px rgba(0,0,0,.25);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .tabs{
      display:flex;
      gap:8px;
      padding:10px;
      border-bottom:1px solid rgba(255,255,255,.12);
      overflow:auto;
      -webkit-overflow-scrolling:touch;
    }
    .tab{
      flex:0 0 auto;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.16);
      color:var(--mut);
      font-weight:800;
      cursor:pointer;
      white-space:nowrap;
    }
    .tab.active{
      background: rgba(255,255,255,.92);
      color:#111;
      border-color: rgba(255,255,255,.92);
    }
    .pane{
      display:none;
      padding:14px;
    }
    .pane.active{display:block}

    .infoGrid{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
    }
    .infoItem{
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.14);
      border-radius:18px;
      padding:12px;
    }
    .infoItem b{display:block;font-size:12px;color:var(--mut2);letter-spacing:1px;text-transform:uppercase;margin-bottom:6px}
    .infoItem span{display:block;font-size:14.5px;color:var(--txt);line-height:1.45}

    .note{
      margin-top:10px;
      font-size:12.5px;
      color:var(--mut2);
      line-height:1.6;
      padding:12px;
      border-radius:18px;
      border:1px dashed rgba(255,255,255,.22);
      background: rgba(0,0,0,.12);
    }

    /* tiny */
    .mut{color:var(--mut2)}
  </style>
</head>

<body>

  <!-- VIDEO BG -->
  <video id="bgVideo" muted loop playsinline preload="auto">
    <source src="assets/bg.mp4" type="video/mp4" />
  </video>
  <div class="overlay"></div>
  <div class="grain"></div>

  <!-- Tap to play layer -->
  <div id="tapToPlay">
    <div class="tapCard">
      <div class="tapTitle">Ketik untuk mula</div>
      <div class="tapDesc">Untuk sesetengah browser (Chrome/Android), video perlu dimulakan selepas satu sentuhan.</div>
      <button class="tapBtn" id="tapBtn">Mulakan</button>
      <div class="mut" style="margin-top:10px;font-size:12px">Jika masih tak jalan, refresh dan tekan sekali lagi.</div>
    </div>
  </div>

  <div class="wrap">

    <div class="topbar">
      <div class="brand">
        <b>Kad Kahwin Digital</b>
        <span id="subtitleTop">Jemputan Rasmi</span>
      </div>
      <div class="pill" title="Countdown ringkas">
        ‚è≥ <span id="miniCountdown">--:--</span>
      </div>
    </div>

    <section class="hero">
      <div class="heroInner">
        <div class="chip">WEDDING INVITATION</div>

        <h1 class="title" id="invTitle">Walimatul Urus</h1>
        <p class="msg" id="invMsg">
          Dengan penuh kesyukuran, kami menjemput anda hadir memeriahkan majlis perkahwinan kami.
        </p>

        <div class="coupleBox">
          <h2 class="couple" id="invCouple">Adam &amp; Hawa</h2>
          <div class="mut" style="margin-top:6px;font-size:13px">
            <span id="invDate">01/12/2025</span> ‚Ä¢ <span id="invTime">9.00am ‚Äì 2.00pm</span>
          </div>
        </div>

        <div class="actions">
          <a class="btn" id="invRsvp" href="#" target="_blank" rel="noopener">‚úâÔ∏è RSVP Sekarang</a>
          <a class="btn secondary" id="invMaps" href="#" target="_blank" rel="noopener">üìç Lihat Lokasi</a>
          <button class="btn secondary small" id="btnCopy">üìã Salin Maklumat</button>
        </div>

        <div class="split"></div>

        <div class="cdTitle">Countdown ke hari majlis</div>
        <div class="countdown" aria-label="Countdown">
          <div class="cdBox"><div class="cdNum" id="cdDays">0</div><div class="cdLbl">Hari</div></div>
          <div class="cdBox"><div class="cdNum" id="cdHours">00</div><div class="cdLbl">Jam</div></div>
          <div class="cdBox"><div class="cdNum" id="cdMins">00</div><div class="cdLbl">Minit</div></div>
          <div class="cdBox"><div class="cdNum" id="cdSecs">00</div><div class="cdLbl">Saat</div></div>
        </div>
      </div>
    </section>

    <section class="tabsWrap">
      <div class="tabs">
        <button class="tab active" data-pane="p-info">Maklumat</button>
        <button class="tab" data-pane="p-lokasi">Lokasi</button>
        <button class="tab" data-pane="p-rsvp">RSVP</button>
        <button class="tab" data-pane="p-notis">Notis</button>
      </div>

      <div class="pane active" id="p-info">
        <div class="infoGrid">
          <div class="infoItem">
            <b>Tarikh</b>
            <span id="infoDate">01/12/2025</span>
          </div>
          <div class="infoItem">
            <b>Masa</b>
            <span id="infoTime">9.00am ‚Äì 2.00pm</span>
          </div>
          <div class="infoItem">
            <b>Tempat</b>
            <span id="invVenue">Dewan Serbaguna</span>
          </div>
          <div class="infoItem">
            <b>Alamat</b>
            <span id="invAddr">Alamat ringkas majlis di sini</span>
          </div>
        </div>
      </div>

      <div class="pane" id="p-lokasi">
        <div class="infoItem">
          <b>Google Maps</b>
          <span>Klik butang di bawah untuk buka lokasi.</span>
          <div style="margin-top:10px">
            <a class="btn secondary" id="mapsBtn2" href="#" target="_blank" rel="noopener">üìç Buka Maps</a>
          </div>
        </div>
      </div>

      <div class="pane" id="p-rsvp">
        <div class="infoItem">
          <b>RSVP</b>
          <span>Klik untuk WhatsApp RSVP (anda boleh ubah teks di Admin Panel).</span>
          <div style="margin-top:10px">
            <a class="btn" id="rsvpBtn2" href="#" target="_blank" rel="noopener">‚úâÔ∏è RSVP WhatsApp</a>
          </div>
        </div>
      </div>

      <div class="pane" id="p-notis">
        <div class="note" id="legalNote">
          Notis: Template ini untuk kegunaan pelanggan berlesen sahaja. Dilarang menjual semula, menyalin, atau mengedar tanpa kebenaran pemilik.
        </div>
      </div>
    </section>

  </div>

<script>
  /***********************
   * 1) DATA (Admin Panel)
   ***********************/
  const KEY = "KADKAHWIN_DATA_V1";
  const DEFAULT_DATA = {
    title:"Walimatul Urus",
    couple:"Adam & Hawa",
    date:"01/12/2025",
    time:"9.00am ‚Äì 2.00pm",
    venue:"Dewan Serbaguna",
    address:"Alamat ringkas majlis di sini",
    maps:"https://maps.google.com/",
    rsvp:"https://wa.me/60123456789?text=Assalamualaikum,%20saya%20nak%20RSVP",
    message:"Dengan penuh kesyukuran, kami menjemput Dato‚Äô/Datin/Tuan/Puan/Encik/Cik sekeluarga hadir memeriahkan majlis perkahwinan kami.",
    // optional (kalau nak)
    eventISO: "" // contoh: "2025-12-01T09:00:00+08:00"
  };

  function loadData(){
    try{
      const raw = localStorage.getItem(KEY);
      return raw ? { ...DEFAULT_DATA, ...JSON.parse(raw) } : DEFAULT_DATA;
    }catch(e){ return DEFAULT_DATA; }
  }

  const d = loadData();

  function setText(id, txt){
    const el = document.getElementById(id);
    if(el) el.textContent = txt || "";
  }

  // fill UI
  setText("invTitle", d.title);
  setText("invMsg", d.message);
  setText("invCouple", d.couple);

  setText("invDate", d.date);
  setText("invTime", d.time);

  setText("infoDate", d.date);
  setText("infoTime", d.time);

  setText("invVenue", d.venue);
  setText("invAddr", d.address);

  // links
  const mapsA = document.getElementById("invMaps");
  const mapsB = document.getElementById("mapsBtn2");
  if(d.maps){
    if(mapsA) mapsA.href = d.maps;
    if(mapsB) mapsB.href = d.maps;
  }

  const rsvpA = document.getElementById("invRsvp");
  const rsvpB = document.getElementById("rsvpBtn2");
  if(d.rsvp){
    if(rsvpA) rsvpA.href = d.rsvp;
    if(rsvpB) rsvpB.href = d.rsvp;
  }

  // copy info button
  const btnCopy = document.getElementById("btnCopy");
  btnCopy?.addEventListener("click", async ()=>{
    const text =
`${d.title}
${d.couple}

Tarikh: ${d.date}
Masa: ${d.time}
Tempat: ${d.venue}
Alamat: ${d.address}

Maps: ${d.maps}
RSVP: ${d.rsvp}`;
    try{
      await navigator.clipboard.writeText(text);
      alert("Maklumat disalin ‚úÖ");
    }catch(e){
      alert(text); // fallback
    }
  });

  /***********************
   * 2) VIDEO AUTOPLAY FIX
   ***********************/
  const v = document.getElementById("bgVideo");
  const tapLayer = document.getElementById("tapToPlay");
  const tapBtn = document.getElementById("tapBtn");

  async function tryPlay(){
    try{
      v.muted = true;
      v.playsInline = true;
      await v.play();
      tapLayer.classList.add("hide");
      return true;
    }catch(e){
      return false;
    }
  }
  window.addEventListener("load", ()=>{ tryPlay(); });

  tapBtn?.addEventListener("click", async ()=>{
    const ok = await tryPlay();
    if(!ok) alert("Browser masih sekat autoplay. Cuba refresh dan ketik sekali lagi.");
  });

  document.addEventListener("visibilitychange", async ()=>{
    if(document.hidden){
      try{ v.pause(); }catch(e){}
    }else{
      try{ await v.play(); }catch(e){}
    }
  });

  /***********************
   * 3) TABS
   ***********************/
  document.querySelectorAll(".tab").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      document.querySelectorAll(".tab").forEach(b=>b.classList.remove("active"));
      document.querySelectorAll(".pane").forEach(p=>p.classList.remove("active"));
      btn.classList.add("active");
      const pane = document.getElementById(btn.dataset.pane);
      pane?.classList.add("active");
    });
  });

  /***********************
   * 4) COUNTDOWN
   * - Paling tepat kalau isi d.eventISO di admin (contoh 2025-12-01T09:00:00+08:00)
   * - Kalau kosong, countdown akan kekal 0
   ***********************/
  function pad2(n){ return String(n).padStart(2,"0"); }

  function parseEvent(){
    if(d.eventISO && typeof d.eventISO === "string" && d.eventISO.trim()){
      const t = new Date(d.eventISO);
      if(!isNaN(t.getTime())) return t;
    }
    return null;
  }

  const eventTime = parseEvent();

  function tick(){
    if(!eventTime){
      // no ISO time set
      setText("miniCountdown","tiada");
      setText("cdDays","0");
      setText("cdHours","00");
      setText("cdMins","00");
      setText("cdSecs","00");
      return;
    }

    const now = new Date();
    let diff = eventTime.getTime() - now.getTime();
    if(diff < 0) diff = 0;

    const s = Math.floor(diff/1000);
    const days = Math.floor(s/86400);
    const hrs  = Math.floor((s%86400)/3600);
    const mins = Math.floor((s%3600)/60);
    const secs = s%60;

    setText("cdDays", String(days));
    setText("cdHours", pad2(hrs));
    setText("cdMins", pad2(mins));
    setText("cdSecs", pad2(secs));

    // mini
    setText("miniCountdown", `${pad2(hrs)}:${pad2(mins)}:${pad2(secs)}`);
  }
  tick();
  setInterval(tick, 1000);
</script>

</body>
</html>
