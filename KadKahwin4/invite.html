  <!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jemputan Digital</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <style>
    :root{
      --bg1:#070707; --bg2:#000;
      --card: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.14);
      --text: #fff;
      --muted: rgba(255,255,255,.70);
      --accent: #d4af37;
      --accent2:#ffffff;
      --radius: 28px;
    }
    body{
      margin:0;
      color:var(--text);
      background:
        radial-gradient(900px 520px at 20% 10%, rgba(255,255,255,.07), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
    }
    .glass{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:var(--radius);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 20px 60px rgba(0,0,0,.55);
    }
    .fadeUp{ animation: fadeUp .65s ease both; }
    @keyframes fadeUp{ from{opacity:0; transform: translateY(14px)} to{opacity:1; transform:none} }
    .chip{ border:1px solid var(--stroke); background: rgba(0,0,0,.25); }
    .btn{
      border-radius: 16px;
      border: 1px solid var(--stroke);
      padding: 12px 14px;
      background: rgba(0,0,0,.22);
    }
    .btnPrimary{
      background: var(--accent);
      color: #0b0b0b;
      border-color: rgba(255,255,255,.18);
      font-weight: 700;
    }
    .input{
      width:100%;
      border-radius: 16px;
      border:1px solid var(--stroke);
      padding: 12px 14px;
      background: rgba(0,0,0,.25);
      outline:none;
    }
    .qrWrap{
      border-radius: 20px;
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.18);
      padding: 14px;
      display: inline-block;
    }
    .gate{
      position: fixed; inset:0;
      background:
        radial-gradient(900px 520px at 20% 10%, rgba(255,255,255,.08), transparent 55%),
        linear-gradient(180deg, #070707, #000);
      display:flex; align-items:center; justify-content:center;
      z-index: 50;
      padding: 24px;
    }
  </style>
</head>

<body class="p-4 max-w-[560px] mx-auto">
  <!-- INTRO GATE -->
  <div id="gate" class="gate">
    <div class="w-full max-w-md glass p-6 text-center space-y-4 fadeUp">
      <div class="text-xs tracking-[.35em] uppercase opacity-70" id="gLabel">Walimatul Urus</div>
      <div class="text-3xl font-extrabold" id="gTitle">Jemputan Digital</div>
      <div class="text-white/70 text-sm" id="gDesc">Klik untuk buka jemputan.</div>

      <div class="grid grid-cols-2 gap-2 pt-2">
        <button id="btnEnter" class="btn btnPrimary">Buka</button>
        <button id="btnMute" class="btn">Muzik: Off</button>
      </div>

      <div class="text-xs opacity-50">Â© R-E-M Digital Invitation</div>
    </div>
  </div>

  <!-- MAIN CARD -->
  <div class="glass p-6 text-center space-y-5 fadeUp">
    <div class="flex items-center justify-between gap-2">
      <div class="flex items-center gap-2">
        <span id="chipStyle" class="chip text-xs px-3 py-2 rounded-full">Style</span>
        <span id="chipVer" class="chip text-xs px-3 py-2 rounded-full">v</span>
      </div>

      <div class="flex items-center gap-2">
        <select id="verPicker" class="chip text-sm px-3 py-2 rounded-full bg-transparent">
          <option value="1">Versi 1</option>
          <option value="2">Versi 2</option>
          <option value="3">Versi 3</option>
          <option value="4">Versi 4</option>
          <option value="5">Versi 5</option>
        </select>
      </div>
    </div>

    <div class="space-y-2">
      <div class="text-xs tracking-[.35em] uppercase opacity-70" id="labelTop">Walimatul Urus</div>
      <h1 id="outNames" class="text-4xl font-extrabold leading-tight">Adam & Hawa</h1>
      <p id="outLine" class="text-white/70">Dengan penuh kesyukuran, kami menjemput Datoâ€™/Datin/Tuan/Puan/Encik/Cik</p>
    </div>

    <div class="space-y-2">
      <div class="text-lg font-semibold">ğŸ‘¨â€ğŸ’¼ Adam bin Ahmad</div>
      <div class="text-lg font-semibold">ğŸ‘©â€ğŸ’¼ Hawa binti Ali</div>
    </div>

    <div class="border-t border-white/10 pt-4 space-y-2 text-sm text-white/80">
      <div>ğŸ“… <span id="outDate">Sabtu, 12 Oktober 2025</span></div>
      <div>ğŸ•š <span id="outTime">11.00 pagi â€“ 4.00 petang</span></div>
      <div>ğŸ“ <span id="outLoc">Dewan Seri Melur</span></div>
    </div>

    <div class="space-y-3 pt-2">
      <input id="guest" class="input" placeholder="Nama tetamu" />
      <div class="grid grid-cols-2 gap-3">
        <button class="btn btnPrimary" onclick="rsvp('Hadir')">Hadir</button>
        <button class="btn" onclick="rsvp('Tidak Hadir')">Tidak Hadir</button>
      </div>

      <div class="grid grid-cols-2 gap-3">
        <button class="btn" id="btnCopy">Copy Link</button>
        <button class="btn" id="btnMaps">Buka Maps</button>
      </div>
    </div>

    <div class="pt-2">
      <div class="qrWrap">
        <div id="qrcode"></div>
      </div>
    </div>

    <div class="text-xs opacity-60" id="footLine">Jemputan Digital â€¢ Mesra Telefon ğŸ“±</div>
    <div class="text-xs opacity-50">Â© R-E-M Digital Invitation</div>
  </div>

<script>
/* =========================
   0) ADMIN CONFIG (tukar sini je)
========================= */
const CONFIG = {
  WA_PHONE: "601111661303", // âœ… tukar nombor whatsapp anda
  MAPS_URL: "https://maps.google.com/?q=Dewan%20Seri%20Melur", // âœ… tukar lokasi maps
  EVENT: {
    names: "Adam & Hawa",
    date: "Sabtu, 12 Oktober 2025",
    time: "11.00 pagi â€“ 4.00 petang",
    location: "Dewan Seri Melur"
  },
  MUSIC_URL: "" // optional: letak link mp3 (https://...) kalau nak muzik
};

/* =========================
   1) UTIL
========================= */
const qs = new URLSearchParams(location.search);
const pkg = (qs.get("pkg") || "pro").toLowerCase();      // basic | pro | ultra
let v = parseInt(qs.get("v") || "4", 10);                // default v4
const nameParam = (qs.get("name") || "").trim();

const allowByPkg = {
  basic: [1],
  pro: [1,2,3],
  ultra: [1,2,3,4,5]
};
const allowed = allowByPkg[pkg] || allowByPkg.pro;
if (!allowed.includes(v)) v = allowed[0];

/* =========================
   2) THEMES 1â€“5
========================= */
const THEMES = {
  1: { style:"Premium",  accent:"#d4af37", bg1:"#0b0b0b", bg2:"#000000", card:"rgba(255,255,255,.06)" },
  2: { style:"Modern",   accent:"#39ffcf", bg1:"#070a12", bg2:"#000000", card:"rgba(57,255,207,.06)" },
  3: { style:"Minimal",  accent:"#ffffff", bg1:"#0a0a0a", bg2:"#000000", card:"rgba(255,255,255,.06)" },
  4: { style:"Islamic",  accent:"#2ecc71", bg1:"#07120a", bg2:"#000000", card:"rgba(46,204,113,.06)" },
  5: { style:"Royal",    accent:"#a78bfa", bg1:"#0a0712", bg2:"#000000", card:"rgba(167,139,250,.06)" },
};

function applyTheme(ver){
  const t = THEMES[ver] || THEMES[4];
  document.documentElement.style.setProperty("--accent", t.accent);
  document.documentElement.style.setProperty("--bg1", t.bg1);
  document.documentElement.style.setProperty("--bg2", t.bg2);
  document.documentElement.style.setProperty("--card", t.card);

  chipStyle.textContent = t.style;
  chipVer.textContent = "v" + ver;
  verPicker.value = String(ver);
}

/* =========================
   3) BM/EN AUTO (simple)
========================= */
const isEN = (navigator.language || "").toLowerCase().startsWith("en");
const T = {
  labelTop: isEN ? "Wedding Invitation" : "Walimatul Urus",
  line: isEN ? "With gratitude, we invite you to attend" : "Dengan penuh kesyukuran, kami menjemput Datoâ€™/Datin/Tuan/Puan/Encik/Cik",
  hadir: isEN ? "Attend" : "Hadir",
  tidak: isEN ? "Not attending" : "Tidak Hadir",
  copy: isEN ? "Copy Link" : "Copy Link",
  maps: isEN ? "Open Maps" : "Buka Maps",
  foot: isEN ? "Digital Invitation â€¢ Mobile-friendly" : "Jemputan Digital â€¢ Mesra Telefon ğŸ“±",
  gateDesc: isEN ? "Tap to open the invitation." : "Klik untuk buka jemputan."
};

/* =========================
   4) RENDER DATA
========================= */
outNames.textContent = CONFIG.EVENT.names;
outDate.textContent = CONFIG.EVENT.date;
outTime.textContent = CONFIG.EVENT.time;
outLoc.textContent  = CONFIG.EVENT.location;

labelTop.textContent = T.labelTop;
outLine.textContent  = T.line;
footLine.textContent = T.foot;

// name auto from link
if (nameParam) guest.value = nameParam;

/* =========================
   5) VERSION PICKER + LOCK BY PACKAGE
========================= */
function refreshPickerOptions(){
  [...verPicker.options].forEach(opt=>{
    const n = parseInt(opt.value,10);
    opt.disabled = !allowed.includes(n);
    opt.textContent = "Versi " + n + (opt.disabled ? " (Lock)" : "");
  });
}
refreshPickerOptions();
applyTheme(v);

verPicker.addEventListener("change", ()=>{
  const next = parseInt(verPicker.value,10);
  if (!allowed.includes(next)) return;
  // update URL so share link keep the version
  qs.set("v", String(next));
  qs.set("pkg", pkg);
  history.replaceState(null, "", location.pathname + "?" + qs.toString());
  applyTheme(next);
  rebuildQR();
});

/* =========================
   6) QR + COPY LINK + MAPS
========================= */
function rebuildQR(){
  const el = document.getElementById("qrcode");
  el.innerHTML = "";
  new QRCode(el, {
    text: window.location.href,
    width: 210,
    height: 210,
    colorDark: "#ffffff",
    colorLight: "transparent"
  });
}
rebuildQR();

btnCopy.addEventListener("click", async ()=>{
  try{
    await navigator.clipboard.writeText(window.location.href);
    btnCopy.textContent = isEN ? "Copied!" : "Dah Copy!";
    setTimeout(()=>btnCopy.textContent = T.copy, 1200);
  }catch(e){
    alert(window.location.href);
  }
});

btnMaps.addEventListener("click", ()=>{
  window.open(CONFIG.MAPS_URL, "_blank");
});

/* =========================
   7) RSVP WHATSAPP (BETUL)
========================= */
function rsvp(status){
  const guestName = (document.getElementById("guest").value || "").trim();

  const msg =
`RSVP ${status}
Nama: ${guestName || "-"}
Majlis: ${CONFIG.EVENT.names}
Tarikh: ${CONFIG.EVENT.date}
Lokasi: ${CONFIG.EVENT.location}`;

  const url = "https://wa.me/" + CONFIG.WA_PHONE + "?text=" + encodeURIComponent(msg);
  window.open(url, "_blank");
}

/* =========================
   8) INTRO GATE + MUSIC (optional)
========================= */
gLabel.textContent = T.labelTop;
gDesc.textContent = T.gateDesc;

let audio = null;
let musicOn = false;

function setupAudio(){
  if (!CONFIG.MUSIC_URL) return;
  audio = new Audio(CONFIG.MUSIC_URL);
  audio.loop = true;
  audio.volume = 0.7;
}

setupAudio();

btnMute.addEventListener("click", ()=>{
  musicOn = !musicOn;
  btnMute.textContent = musicOn ? (isEN ? "Music: On" : "Muzik: On") : (isEN ? "Music: Off" : "Muzik: Off");
});

btnEnter.addEventListener("click", ()=>{
  gate.style.display = "none";
  if (musicOn && audio){
    audio.play().catch(()=>{});
  }
});
</script>
</body>
</html>    
