<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Jemputan | Walimatul Urus</title>

  <!-- Font (optional, selamat kalau tak load pun) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#07070a;
      --card: rgba(255,255,255,.10);
      --card2: rgba(255,255,255,.07);
      --stroke: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
      --muted2: rgba(255,255,255,.55);
      --gold1:#e7d7a6;
      --gold2:#caa44d;
      --shadow: 0 20px 70px rgba(0,0,0,.45);
      --radius: 22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Poppins, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow-x:hidden;
    }

    /* Background video */
    #bgVideo{
      position: fixed;
      inset: 0;
      width:100%;
      height:100%;
      object-fit:cover;
      z-index:-3;
      background:#000;
      filter: saturate(1.05) contrast(1.05);
    }
    .overlay{
      position:fixed;
      inset:0;
      z-index:-2;
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(202,164,77,.18), transparent 55%),
        radial-gradient(900px 600px at 85% 35%, rgba(231,215,166,.12), transparent 55%),
        linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.68));
    }
    .grain{
      position:fixed; inset:0; z-index:-1; pointer-events:none;
      opacity:.12;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      background-size:220px 220px;
      mix-blend-mode:overlay;
    }

    /* Tap-to-play layer (untuk browser yang sekat autoplay) */
    #tapToPlay{
      position:fixed; inset:0; z-index:50;
      display:none;
      align-items:center; justify-content:center;
      padding:22px;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .tapCard{
      width:min(560px,100%);
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      border-radius: 20px;
      padding:22px 18px;
      box-shadow: var(--shadow);
      text-align:center;
    }
    .tapTitle{
      font-weight:700;
      font-size:18px;
      margin-bottom:6px;
      letter-spacing:.2px;
    }
    .tapDesc{
      font-size:13px;
      color: var(--muted);
      line-height:1.55;
      margin-bottom:14px;
    }

    /* Layout */
    .wrap{
      max-width: 980px;
      margin:0 auto;
      padding: 22px 16px 90px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      opacity:.95;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: linear-gradient(135deg, var(--gold1), var(--gold2));
      box-shadow: 0 0 18px rgba(202,164,77,.45);
    }
    .brand b{font-weight:700}
    .chip{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      color: var(--muted);
      padding: 8px 12px;
      border-radius:999px;
      font-size:12px;
      display:flex;
      align-items:center;
      gap:8px;
    }

    /* Hero card */
    .hero{
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(900px 380px at 20% 0%, rgba(231,215,166,.18), transparent 55%),
                  radial-gradient(900px 380px at 85% 30%, rgba(202,164,77,.14), transparent 60%);
      pointer-events:none;
    }
    .heroInner{
      position:relative;
      padding: 26px 18px 18px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      letter-spacing:1px;
      text-transform:uppercase;
      padding: 7px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      color: var(--muted);
    }
    .badge .mini{
      width:8px;height:8px;border-radius:999px;
      background: linear-gradient(135deg, var(--gold1), var(--gold2));
    }
    .title{
      margin: 14px 0 6px;
      font-family: "Playfair Display", serif;
      font-weight: 700;
      letter-spacing:.3px;
      font-size: clamp(30px, 5.4vw, 56px);
      line-height: 1.05;
    }
    .subtitle{
      color: var(--muted);
      line-height:1.6;
      font-size: 14px;
      max-width: 60ch;
    }
    .names{
      margin-top: 18px;
      display:grid;
      gap:10px;
    }
    .names .pair{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:baseline;
      justify-content:center;
      text-align:center;
      padding: 16px 14px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.07);
    }
    .names .pair span{
      font-family:"Playfair Display",serif;
      font-size: clamp(22px, 4.6vw, 34px);
      font-weight: 700;
    }
    .names .pair em{
      font-style:normal;
      color: var(--gold1);
      font-weight: 700;
      letter-spacing: 1px;
    }

    /* Buttons */
    .actions{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      justify-content:center;
      margin-top: 16px;
    }
    .btn{
      border:none;
      cursor:pointer;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight: 700;
      letter-spacing:.2px;
      transition: transform .12s ease, opacity .12s ease, background .12s ease;
      display:inline-flex;
      align-items:center;
      gap:10px;
      user-select:none;
      text-decoration:none;
      justify-content:center;
    }
    .btn:active{transform:scale(.98)}
    .btnPrimary{
      background: linear-gradient(135deg, var(--gold1), var(--gold2));
      color:#161514;
      box-shadow: 0 12px 28px rgba(202,164,77,.25);
    }
    .btnGhost{
      background: rgba(255,255,255,.10);
      color: var(--text);
      border:1px solid rgba(255,255,255,.14);
    }
    .btnSmall{
      padding: 10px 14px;
      font-size: 13px;
    }

    /* Sections */
    .grid{
      display:grid;
      gap: 14px;
      margin-top: 14px;
    }
    @media(min-width:860px){
      .grid{grid-template-columns: 1.15fr .85fr}
    }

    .section{
      border-radius: var(--radius);
      background: var(--card);
      border:1px solid var(--stroke);
      box-shadow: var(--shadow);
      padding: 18px;
    }
    .section h2{
      margin: 0 0 10px;
      font-size: 16px;
      letter-spacing:.2px;
    }
    .muted{color: var(--muted); font-size: 13px; line-height:1.6}
    .hr{
      height:1px;
      background: rgba(255,255,255,.12);
      margin: 14px 0;
    }

    /* Info list */
    .info{
      display:grid;
      gap:10px;
    }
    .row{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding: 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
    }
    .ico{
      width:36px; height:36px;
      border-radius: 12px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      flex:0 0 36px;
      font-size: 16px;
    }
    .row b{display:block; font-size: 13px; margin-bottom: 3px}
    .row span{display:block; color: var(--muted); font-size: 13px; line-height:1.45}

    /* Countdown */
    .count{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
      margin-top: 12px;
    }
    .pill{
      padding: 12px 10px;
      text-align:center;
      border-radius: 18px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
    }
    .pill b{
      display:block;
      font-size: 20px;
      font-weight: 800;
      letter-spacing:.3px;
    }
    .pill small{
      display:block;
      color: var(--muted);
      font-size: 11px;
      margin-top: 4px;
      letter-spacing:.7px;
      text-transform:uppercase;
    }

    /* RSVP */
    .form{
      display:grid;
      gap:10px;
      margin-top: 10px;
    }
    .field{
      display:grid;
      gap:6px;
    }
    label{font-size:12px; color: var(--muted)}
    input, select, textarea{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      color: var(--text);
      outline:none;
      font-family: inherit;
    }
    textarea{min-height: 92px; resize:vertical}

    /* Gallery */
    .gallery{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top: 10px;
    }
    .ph{
      aspect-ratio: 1/1;
      border-radius: 16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      overflow:hidden;
      position:relative;
    }
    .ph img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
      filter:saturate(1.05) contrast(1.05);
    }
    .ph::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, transparent, rgba(0,0,0,.28));
      pointer-events:none;
    }

    /* Footer */
    .footer{
      margin-top: 14px;
      padding: 18px;
      border-radius: var(--radius);
      background: rgba(255,255,255,.07);
      border:1px solid rgba(255,255,255,.12);
      text-align:center;
      color: var(--muted2);
      font-size: 12px;
      line-height:1.6;
    }
    .footer b{color: var(--muted);}

    /* Floating nav */
    .dock{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 14px;
      width: min(980px, calc(100% - 24px));
      z-index: 40;
      display:flex;
      justify-content:center;
    }
    .dockInner{
      width:100%;
      display:flex;
      gap:10px;
      padding: 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.40);
      border:1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 20px 70px rgba(0,0,0,.45);
      overflow:auto;
    }
    .dockInner a{
      white-space:nowrap;
      text-decoration:none;
      color: var(--muted);
      font-size: 12px;
      padding: 10px 12px;
      border-radius: 999px;
      border:1px solid transparent;
      background: rgba(255,255,255,.06);
      transition: .12s ease;
    }
    .dockInner a:hover{opacity:.95}
    .dockInner a.active{
      color:#171614;
      background: linear-gradient(135deg, var(--gold1), var(--gold2));
      border-color: rgba(0,0,0,.12);
      font-weight: 800;
    }

    /* Motion */
    @media (prefers-reduced-motion: no-preference){
      .hero, .section{animation: fadeUp .55s ease both}
      .section:nth-child(2){animation-delay:.06s}
      .section:nth-child(3){animation-delay:.12s}
      .section:nth-child(4){animation-delay:.18s}
      @keyframes fadeUp{
        from{opacity:0; transform: translateY(10px)}
        to{opacity:1; transform: translateY(0)}
      }
    }
  </style>
</head>

<body>
  <!-- Background Video -->
  <video id="bgVideo" muted loop playsinline preload="auto">
    <source src="assets/bg.mp4" type="video/mp4" />
  </video>

  <div class="overlay"></div>
  <div class="grain"></div>

  <!-- Tap-to-play -->
  <div id="tapToPlay">
    <div class="tapCard">
      <div class="tapTitle">Ketik untuk mula</div>
      <div class="tapDesc">Sesetengah browser (Chrome/Android) perlu satu sentuhan untuk memainkan video latar.</div>
      <button class="btn btnPrimary" id="tapBtn" type="button">Mulakan Video</button>
      <div class="muted" style="margin-top:10px">Tip: Kalau masih tak jalan, refresh & ketik sekali lagi.</div>
    </div>
  </div>

  <div class="wrap" id="top">
    <div class="topbar">
      <div class="brand">
        <div class="dot"></div>
        <div>
          <b>Kad Kahwin Digital</b><br>
          <span class="muted" style="font-size:12px">Jemputan Rasmi</span>
        </div>
      </div>

      <div class="chip" id="liveClock">‚è≥ <span>--:--</span></div>
    </div>

    <!-- HERO -->
    <section class="hero" id="hero">
      <div class="heroInner">
        <div class="badge"><span class="mini"></span> Wedding Invitation</div>

        <div class="title">Walimatul Urus</div>
        <div class="subtitle">
          Dengan penuh kesyukuran, kami menjemput <b>Dato‚Äô/Datin/Tuan/Puan/Encik/Cik</b> sekeluarga hadir memeriahkan majlis perkahwinan kami.
        </div>

        <div class="names">
          <div class="pair">
            <span id="groomName">Adam</span>
            <em>&amp;</em>
            <span id="brideName">Hawa</span>
          </div>
        </div>

        <div class="actions">
          <a class="btn btnPrimary" href="#rsvp">üì© RSVP Sekarang</a>
          <a class="btn btnGhost" href="#lokasi">üìç Lihat Lokasi</a>
          <button class="btn btnGhost" id="btnCalendar" type="button">üóìÔ∏è Add to Calendar</button>
        </div>

        <div class="hr"></div>

        <!-- COUNTDOWN -->
        <div class="muted"><b>Countdown</b> ke hari majlis</div>
        <div class="count" aria-label="Countdown">
          <div class="pill"><b id="cdD">--</b><small>Hari</small></div>
          <div class="pill"><b id="cdH">--</b><small>Jam</small></div>
          <div class="pill"><b id="cdM">--</b><small>Minit</small></div>
          <div class="pill"><b id="cdS">--</b><small>Saat</small></div>
        </div>
      </div>
    </section>

    <div class="grid">
      <!-- MAKLUMAT MAJLIS -->
      <section class="section" id="maklumat">
        <h2>Maklumat Majlis</h2>
        <div class="muted">Sila semak butiran di bawah. Anda boleh ubah semua teks ikut kehendak.</div>

        <div class="info" style="margin-top:12px">
          <div class="row">
            <div class="ico">üìÖ</div>
            <div>
              <b>Tarikh</b>
              <span id="eventDateText">01/12/2025 (Isnin)</span>
            </div>
          </div>

          <div class="row">
            <div class="ico">‚è∞</div>
            <div>
              <b>Masa</b>
              <span id="eventTimeText">9.00am ‚Äì 2.00pm</span>
            </div>
          </div>

          <div class="row" id="lokasi">
            <div class="ico">üìç</div>
            <div>
              <b>Lokasi</b>
              <span id="venueName">Dewan Seri Indah, Bandar Baru</span>
              <span class="muted" id="venueAddr">Jalan Contoh 1, 43000 Kajang, Selangor</span>
            </div>
          </div>
        </div>

        <div class="actions" style="margin-top:12px; justify-content:flex-start">
          <a class="btn btnPrimary btnSmall" id="btnMaps" target="_blank" rel="noopener">Buka Google Maps</a>
          <a class="btn btnGhost btnSmall" href="#aturcara">Aturcara</a>
          <a class="btn btnGhost btnSmall" href="#hadiah">Hadiah</a>
        </div>
      </section>

      <!-- ATURCARA -->
      <section class="section" id="aturcara">
        <h2>Aturcara Majlis</h2>
        <div class="muted">Contoh aturcara (boleh ubah / tambah).</div>

        <div class="info" style="margin-top:12px">
          <div class="row">
            <div class="ico">üïå</div>
            <div>
              <b>Akad Nikah</b>
              <span id="akadText">8.30am ‚Äì 9.15am</span>
            </div>
          </div>

          <div class="row">
            <div class="ico">üçΩÔ∏è</div>
            <div>
              <b>Jamuan</b>
              <span id="jamuanText">9.00am ‚Äì 2.00pm</span>
            </div>
          </div>

          <div class="row">
            <div class="ico">üì∏</div>
            <div>
              <b>Sesi Bergambar</b>
              <span id="photoText">11.30am ‚Äì 12.30pm</span>
            </div>
          </div>
        </div>

        <div class="hr"></div>
        <div class="muted">
          <b>Dress code (optional):</b> Sopan & kemas. <br/>
          <b>Nota:</b> Kehadiran anda sangat kami hargai.
        </div>
      </section>
    </div>

    <!-- GALERI -->
    <section class="section" id="galeri" style="margin-top:14px">
      <h2>Galeri</h2>
      <div class="muted">Letak gambar anda dalam folder <b>assets</b> (contoh: <i>p1.jpg, p2.jpg, p3.jpg</i>) kemudian tukar nama file di bawah.</div>

      <div class="gallery">
        <div class="ph"><img src="assets/p1.jpg" alt="Galeri 1" onerror="this.style.display='none'"></div>
        <div class="ph"><img src="assets/p2.jpg" alt="Galeri 2" onerror="this.style.display='none'"></div>
        <div class="ph"><img src="assets/p3.jpg" alt="Galeri 3" onerror="this.style.display='none'"></div>
      </div>

      <div class="actions" style="margin-top:12px; justify-content:flex-start">
        <button class="btn btnGhost btnSmall" id="btnShare" type="button">üì§ Share Link</button>
        <a class="btn btnGhost btnSmall" href="#rsvp">üì© RSVP</a>
      </div>
    </section>

    <!-- RSVP -->
    <section class="section" id="rsvp" style="margin-top:14px">
      <h2>RSVP Kehadiran</h2>
      <div class="muted">Isi ringkas, kemudian sistem akan buka WhatsApp untuk hantar mesej RSVP.</div>

      <div class="form">
        <div class="field">
          <label>Nama</label>
          <input id="fNama" placeholder="Contoh: Ahmad bin Ali" autocomplete="name">
        </div>

        <div class="field">
          <label>Bilangan hadir</label>
          <select id="fBil">
            <option value="1">1 orang</option>
            <option value="2">2 orang</option>
            <option value="3">3 orang</option>
            <option value="4">4 orang</option>
            <option value="5">5 orang</option>
            <option value="6">6 orang</option>
          </select>
        </div>

        <div class="field">
          <label>Status</label>
          <select id="fStatus">
            <option value="Hadir">‚úÖ Hadir</option>
            <option value="Tidak dapat hadir">‚ùå Tidak dapat hadir</option>
            <option value="Masih belum pasti">‚è≥ Masih belum pasti</option>
          </select>
        </div>

        <div class="field">
          <label>Ucapan (optional)</label>
          <textarea id="fUcapan" placeholder="Tulis ucapan ringkas..."></textarea>
        </div>

        <div class="actions" style="justify-content:flex-start">
          <button class="btn btnPrimary" id="btnRSVP" type="button">Hantar RSVP WhatsApp</button>
          <button class="btn btnGhost" id="btnCopy" type="button">Copy Text RSVP</button>
        </div>

        <div class="muted" style="margin-top:6px">
          * WhatsApp akan guna nombor tuan rumah yang anda set di bawah (dalam script).
        </div>
      </div>
    </section>

    <!-- HADIAH -->
    <section class="section" id="hadiah" style="margin-top:14px">
      <h2>Hadiah & Sumbangan</h2>
      <div class="muted">Jika anda ingin memberi hadiah, berikut adalah pilihan (boleh padam jika tak mahu).</div>

      <div class="info" style="margin-top:12px">
        <div class="row">
          <div class="ico">üéÅ</div>
          <div>
            <b>Hadiah</b>
            <span>Doa & kehadiran anda sudah memadai. Terima kasih.</span>
          </div>
        </div>

        <div class="row">
          <div class="ico">üí≥</div>
          <div>
            <b>Online Transfer (optional)</b>
            <span id="bankText">Maybank ‚Ä¢ 1234 5678 9012 ‚Ä¢ AHMAD ALI</span>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="section" id="hubungi" style="margin-top:14px">
      <h2>Hubungi</h2>
      <div class="muted">Jika perlu bantuan arah / pertanyaan, hubungi wakil berikut.</div>

      <div class="actions" style="justify-content:flex-start; margin-top:12px">
        <a class="btn btnGhost" id="btnWA1" target="_blank" rel="noopener">WhatsApp (Wakil 1)</a>
        <a class="btn btnGhost" id="btnWA2" target="_blank" rel="noopener">WhatsApp (Wakil 2)</a>
      </div>
    </section>

    <div class="footer">
      <b>Nota:</b> Jangan guna/ jual template ini tanpa kebenaran pemilik. <br/>
      ¬© <span id="yr"></span> Kad Kahwin Digital ‚Ä¢ Versi Premium
    </div>
  </div>

  <!-- Floating Dock -->
  <div class="dock" aria-label="Menu">
    <div class="dockInner" id="dock">
      <a href="#hero" class="active">Utama</a>
      <a href="#maklumat">Maklumat</a>
      <a href="#aturcara">Aturcara</a>
      <a href="#galeri">Galeri</a>
      <a href="#rsvp">RSVP</a>
      <a href="#hadiah">Hadiah</a>
      <a href="#hubungi">Hubungi</a>
    </div>
  </div>

  <script>
    // =========================
    // 1) SETTING WAJIB UBAH
    // =========================
    const CONFIG = {
      groom: "Adam",
      bride: "Hawa",

      // Tarikh & masa majlis (untuk countdown + calendar)
      // Format: YYYY-MM-DDTHH:MM:SS+08:00  (Malaysia +08:00)
      startISO: "2025-12-01T09:00:00+08:00",
      endISO:   "2025-12-01T14:00:00+08:00",

      dateText: "01/12/2025 (Isnin)",
      timeText: "9.00am ‚Äì 2.00pm",

      venueName: "Dewan Seri Indah, Bandar Baru",
      venueAddr: "Jalan Contoh 1, 43000 Kajang, Selangor",

      // Link Google Maps (PASTE LINK ANDA)
      mapsUrl: "https://maps.google.com/?q=Dewan%20Seri%20Indah%20Bandar%20Baru",

      // Nombor WhatsApp untuk RSVP (format negara tanpa +, contoh MY: 60123456789)
      rsvpWaNumber: "60123456789",

      // Wakil untuk dihubungi
      contact1: { name: "Wakil 1", number: "60123456789" },
      contact2: { name: "Wakil 2", number: "60111112222" },

      bankText: "Maybank ‚Ä¢ 1234 5678 9012 ‚Ä¢ AHMAD ALI"
    };

    // =========================
    // 2) APPLY TEXT
    // =========================
    const $ = (s)=>document.querySelector(s);

    $("#groomName").textContent = CONFIG.groom;
    $("#brideName").textContent = CONFIG.bride;

    $("#eventDateText").textContent = CONFIG.dateText;
    $("#eventTimeText").textContent = CONFIG.timeText;

    $("#venueName").textContent = CONFIG.venueName;
    $("#venueAddr").textContent = CONFIG.venueAddr;

    $("#btnMaps").href = CONFIG.mapsUrl;

    $("#bankText").textContent = CONFIG.bankText;

    // WhatsApp contact buttons
    const waLink = (num, text="") => "https://wa.me/" + num.replace(/\D/g,"") + (text ? ("?text=" + encodeURIComponent(text)) : "");
    $("#btnWA1").href = waLink(CONFIG.contact1.number, "Assalamualaikum, saya ingin bertanya mengenai majlis.");
    $("#btnWA1").textContent = "WhatsApp (" + CONFIG.contact1.name + ")";
    $("#btnWA2").href = waLink(CONFIG.contact2.number, "Assalamualaikum, saya ingin bertanya mengenai majlis.");
    $("#btnWA2").textContent = "WhatsApp (" + CONFIG.contact2.name + ")";

    // Year
    $("#yr").textContent = new Date().getFullYear();

    // Live clock
    function tickClock(){
      const d = new Date();
      const hh = String(d.getHours()).padStart(2,"0");
      const mm = String(d.getMinutes()).padStart(2,"0");
      $("#liveClock span").textContent = hh + ":" + mm;
    }
    tickClock(); setInterval(tickClock, 1000 * 10);

    // =========================
    // 3) COUNTDOWN
    // =========================
    const startDate = new Date(CONFIG.startISO);
    function countdown(){
      const now = new Date();
      let diff = startDate - now;
      if (diff < 0) diff = 0;

      const s = Math.floor(diff/1000);
      const d = Math.floor(s/86400);
      const h = Math.floor((s%86400)/3600);
      const m = Math.floor((s%3600)/60);
      const ss = s%60;

      $("#cdD").textContent = d;
      $("#cdH").textContent = String(h).padStart(2,"0");
      $("#cdM").textContent = String(m).padStart(2,"0");
      $("#cdS").textContent = String(ss).padStart(2,"0");
    }
    countdown(); setInterval(countdown, 1000);

    // =========================
    // 4) ADD TO CALENDAR (ICS)
    // =========================
    function toICSDate(dt){
      // Convert to UTC format yyyymmddThhmmssZ
      const d = new Date(dt);
      const y = d.getUTCFullYear();
      const mo = String(d.getUTCMonth()+1).padStart(2,"0");
      const da = String(d.getUTCDate()).padStart(2,"0");
      const hh = String(d.getUTCHours()).padStart(2,"0");
      const mm = String(d.getUTCMinutes()).padStart(2,"0");
      const ss = String(d.getUTCSeconds()).padStart(2,"0");
      return `${y}${mo}${da}T${hh}${mm}${ss}Z`;
    }
    $("#btnCalendar").addEventListener("click", ()=>{
      const title = `Walimatul Urus ${CONFIG.groom} & ${CONFIG.bride}`;
      const desc  = `Jemputan majlis perkahwinan. Lokasi: ${CONFIG.venueName}`;
      const loc   = `${CONFIG.venueName}, ${CONFIG.venueAddr}`;
      const dtS   = toICSDate(CONFIG.startISO);
      const dtE   = toICSDate(CONFIG.endISO);

      const ics =
`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//KadKahwin//MY//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:${Date.now()}@kadkahwin
DTSTAMP:${toICSDate(new Date())}
DTSTART:${dtS}
DTEND:${dtE}
SUMMARY:${title}
DESCRIPTION:${desc}
LOCATION:${loc}
END:VEVENT
END:VCALENDAR`;

      const blob = new Blob([ics], {type:"text/calendar;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "jemputan.ics";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

    // =========================
    // 5) RSVP -> WhatsApp
    // =========================
    function buildRsvpText(){
      const nama = ($("#fNama").value || "‚Äî").trim();
      const bil  = $("#fBil").value;
      const st   = $("#fStatus").value;
      const ucp  = ($("#fUcapan").value || "").trim();

      let msg =
`Assalamualaikum.
RSVP Majlis Walimatul Urus ${CONFIG.groom} & ${CONFIG.bride}

Nama: ${nama}
Bilangan hadir: ${bil}
Status: ${st}
Tarikh: ${CONFIG.dateText}
Masa: ${CONFIG.timeText}
Lokasi: ${CONFIG.venueName}

`;
      if (ucp) msg += `Ucapan: ${ucp}\n`;
      msg += `\nTerima kasih.`;
      return msg;
    }

    $("#btnRSVP").addEventListener("click", ()=>{
      const text = buildRsvpText();
      window.open(waLink(CONFIG.rsvpWaNumber, text), "_blank");
    });

    $("#btnCopy").addEventListener("click", async ()=>{
      const text = buildRsvpText();
      try{
        await navigator.clipboard.writeText(text);
        alert("Text RSVP sudah di-copy.");
      }catch(e){
        alert(text);
      }
    });

    // =========================
    // 6) SHARE LINK
    // =========================
    $("#btnShare").addEventListener("click", async ()=>{
      const url = location.href;
      const title = document.title;
      try{
        if (navigator.share){
          await navigator.share({ title, url });
        } else {
          await navigator.clipboard.writeText(url);
          alert("Link sudah di-copy: " + url);
        }
      }catch(e){}
    });

    // =========================
    // 7) DOCK ACTIVE LINK
    // =========================
    const dockLinks = Array.from(document.querySelectorAll("#dock a"));
    const sections = dockLinks.map(a => document.querySelector(a.getAttribute("href")));
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(en=>{
        if(en.isIntersecting){
          dockLinks.forEach(a=>a.classList.remove("active"));
          const idx = sections.indexOf(en.target);
          if(idx>=0) dockLinks[idx].classList.add("active");
        }
      });
    }, { threshold: 0.35 });
    sections.forEach(s=> s && io.observe(s));

    // =========================
    // 8) VIDEO AUTOPLAY FIX
    // =========================
    const v = document.getElementById("bgVideo");
    const tapLayer = document.getElementById("tapToPlay");
    const tapBtn = document.getElementById("tapBtn");

    async function tryPlay(){
      try{
        v.muted = true;
        await v.play();
        tapLayer.style.display = "none";
        return true;
      }catch(e){
        tapLayer.style.display = "flex";
        return false;
      }
    }

    window.addEventListener("load", ()=>{ tryPlay(); });
    tapBtn.addEventListener("click", async ()=>{
      const ok = await tryPlay();
      if(!ok) alert("Browser masih sekat autoplay. Cuba refresh dan ketik sekali lagi.");
    });

    document.addEventListener("visibilitychange", async ()=>{
      if(document.hidden){
        try{ v.pause(); }catch(e){}
      } else {
        try{ await v.play(); }catch(e){}
      }
    });
  </script>
</body>
</html>
