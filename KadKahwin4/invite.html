<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jemputan</title>

  <style>
    :root{
      --accent:#d6b36a; /* gold default */
      --bg:#0b0b0c;
      --glass:rgba(255,255,255,.10);
      --border:rgba(255,255,255,.14);
      --text:#ffffff;
      --muted:rgba(255,255,255,.80);
      --shadow:rgba(0,0,0,.45);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    body{min-height:100vh;background:var(--bg);color:var(--text);overflow-x:hidden}
    #bgVideo{position:fixed;inset:0;width:100%;height:100%;object-fit:cover;z-index:-3;background:#000;display:none}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:-2}
    .topbar{
      position:sticky;top:0;z-index:5;
      padding:12px 14px;
      display:flex;gap:12px;align-items:center;justify-content:space-between;
      background:linear-gradient(to bottom, rgba(0,0,0,.55), rgba(0,0,0,0));
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
    }
    .brand{display:flex;flex-direction:column;gap:2px}
    .brand b{font-size:18px;letter-spacing:.2px}
    .brand span{opacity:.75;font-size:12px}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:999px;
      background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.14);
      box-shadow:0 10px 26px rgba(0,0,0,.25);
      font-size:12px;opacity:.95;
    }
    .container{width:min(860px,100%);margin:0 auto;padding:16px}
    .hero{
      margin-top:8px;
      background:var(--glass);
      border:1px solid var(--border);
      border-radius:26px;
      padding:18px;
      backdrop-filter:blur(12px);
      -webkit-backdrop-filter:blur(12px);
      box-shadow:0 20px 70px var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 12px;border-radius:999px;
      background:rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.16);
      font-size:12px;letter-spacing:1px;text-transform:uppercase;opacity:.95;
    }
    h1{font-size:40px;line-height:1.05;margin:14px 0 8px;font-weight:900}
    .msg{opacity:.9;line-height:1.55;font-size:15px;margin:10px 0 16px}
    .couple{
      margin:10px 0 18px;
      padding:14px 14px;border-radius:18px;
      background:rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.12);
      font-size:28px;font-weight:900;letter-spacing:.4px;text-align:center;
    }
    .actions{display:flex;flex-wrap:wrap;gap:10px;margin:10px 0 6px}
    .btn{
      flex:1 1 180px;
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:12px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.10);color:#fff;
      font-weight:900;cursor:pointer;
      transition:transform .12s ease, opacity .12s ease, background .12s ease;
    }
    .btn:active{transform:scale(.98)}
    .btnPrimary{background:var(--accent);color:#1b1b1b;border:none}
    .btnPrimary:hover{opacity:.95}
    .grid{
      margin-top:14px;
      display:grid;
      grid-template-columns:repeat(12,1fr);
      gap:12px;
    }
    .card{
      grid-column:span 12;
      background:var(--glass);
      border:1px solid var(--border);
      border-radius:22px;
      padding:16px;
      backdrop-filter:blur(12px);
      -webkit-backdrop-filter:blur(12px);
      box-shadow:0 18px 60px var(--shadow);
    }
    @media(min-width:740px){
      .card.half{grid-column:span 6}
    }
    .card h2{font-size:18px;margin-bottom:10px}
    .kv{display:grid;grid-template-columns:110px 1fr;gap:10px;align-items:start}
    .k{opacity:.75;font-size:13px}
    .v{font-weight:800}
    .sub{opacity:.85;font-size:13px;line-height:1.5;margin-top:4px}
    .countdown{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:10px}
    .cdBox{
      padding:14px 10px;border-radius:18px;background:rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.12);text-align:center;
    }
    .cdNum{font-size:26px;font-weight:1000;letter-spacing:1px}
    .cdLbl{font-size:12px;opacity:.75;margin-top:2px}
    .tabs{
      position:fixed;left:0;right:0;bottom:0;z-index:10;
      padding:10px 10px 14px;
      background:linear-gradient(to top, rgba(0,0,0,.75), rgba(0,0,0,0));
      backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);
    }
    .tabBar{
      width:min(860px,100%);margin:0 auto;
      display:flex;gap:10px;overflow:auto;padding-bottom:4px;
    }
    .tab{
      flex:0 0 auto;
      padding:12px 14px;border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.10);
      color:#fff;font-weight:900;cursor:pointer;
    }
    .tab.active{background:var(--accent);color:#1b1b1b;border:none}
    .section{display:none}
    .section.active{display:block}
    .vipLock{
      position:fixed;inset:0;z-index:50;
      display:none;align-items:center;justify-content:center;padding:18px;
      background:rgba(0,0,0,.78);
      backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
    }
    .vipCard{
      width:min(560px,100%);border-radius:22px;padding:18px;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      box-shadow:0 20px 70px rgba(0,0,0,.55);
      text-align:center;
    }
    .vipCard h3{font-size:20px;margin:6px 0 8px}
    .vipCard p{opacity:.85;font-size:13px;line-height:1.55;margin-bottom:12px}
    .vipInput{
      width:100%;padding:12px 14px;border-radius:14px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.30);color:#fff;outline:none;
      margin-bottom:10px;
    }
    .miniRow{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
    .note{opacity:.75;font-size:12px;line-height:1.5;margin-top:10px}
    .photoWrap{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .photo{
      width:84px;height:84px;border-radius:18px;overflow:hidden;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.18);
    }
    .photo img{width:100%;height:100%;object-fit:cover;display:block}
    .tiny{font-size:12px;opacity:.8}
    a.link{color:#fff;text-decoration:none;border-bottom:1px dashed rgba(255,255,255,.35)}
  </style>
</head>

<body>
  <video id="bgVideo" muted loop playsinline preload="auto">
    <source src="assets/bg.mp4" type="video/mp4" />
  </video>
  <div class="overlay"></div>

  <!-- VIP LOCK -->
  <div class="vipLock" id="vipLock">
    <div class="vipCard">
      <div class="badge">VIP Only</div>
      <h3>Jemputan ini memerlukan kod VIP</h3>
      <p>Sila masukkan kod yang diberi. (Kod diset dalam admin panel)</p>
      <input class="vipInput" id="vipCodeInput" placeholder="Contoh: VIP123" />
      <div class="miniRow">
        <button class="btn btnPrimary" id="vipUnlockBtn">Buka Jemputan</button>
        <button class="btn" id="vipGoHomeBtn">Kembali</button>
      </div>
      <div class="note">Tip: kod VIP boleh dihantar kepada tetamu melalui WhatsApp.</div>
    </div>
  </div>

  <!-- TOP BAR -->
  <div class="topbar">
    <div class="brand">
      <b id="topTitle">Kad Kahwin Digital</b>
      <span id="topSubtitle">Jemputan Rasmi</span>
    </div>
    <div class="pill" id="guestPill">üë§ Tetamu</div>
  </div>

  <div class="container">

    <!-- HERO -->
    <div class="hero">
      <div class="badge" id="badgeText">WEDDING INVITATION</div>

      <div class="photoWrap" style="margin-top:10px">
        <div class="photo" id="photoBox" style="display:none"><img id="photoImg" alt="Foto" /></div>
        <div>
          <div class="tiny" id="salutationText">Yth. Dato‚Äô/Datin/Tuan/Puan/Encik/Cik</div>
          <div class="tiny" id="guestNameText" style="font-weight:900;margin-top:2px">Tetamu</div>
        </div>
      </div>

      <h1 id="invTitle">Walimatul Urus</h1>
      <div class="msg" id="invMsg">Dengan penuh kesyukuran, kami menjemput anda hadir.</div>
      <div class="couple" id="invCouple">Adam &amp; Hawa</div>

      <div class="actions">
        <button class="btn btnPrimary" id="btnRsvp">‚úâÔ∏è RSVP Sekarang</button>
        <button class="btn" id="btnMaps">üìç Lihat Lokasi</button>
        <button class="btn" id="btnCalendar">üóìÔ∏è Add to Calendar</button>
        <button class="btn" id="btnShare">üîó Share</button>
      </div>

      <div class="note" id="copyrightNote"></div>
    </div>

    <!-- SECTIONS -->
    <div class="grid" style="padding-bottom:110px">
      <div class="card section active" id="secUtama">
        <h2>Maklumat Majlis</h2>
        <div class="kv">
          <div class="k" id="lblDate">Tarikh</div><div class="v" id="invDate">01/12/2025</div>
          <div class="k" id="lblTime">Masa</div><div class="v" id="invTime">9.00am ‚Äì 2.00pm</div>
          <div class="k" id="lblVenue">Tempat</div><div class="v" id="invVenue">Dewan Serbaguna</div>
          <div class="k" id="lblAddr">Alamat</div><div class="v" id="invAddr">Alamat ringkas majlis di sini</div>
        </div>

        <div style="margin-top:14px">
          <h2 id="cdTitle">Countdown ke hari majlis</h2>
          <div class="countdown">
            <div class="cdBox"><div class="cdNum" id="cdD">0</div><div class="cdLbl" id="cdLblD">HARI</div></div>
            <div class="cdBox"><div class="cdNum" id="cdH">00</div><div class="cdLbl" id="cdLblH">JAM</div></div>
            <div class="cdBox"><div class="cdNum" id="cdM">00</div><div class="cdLbl" id="cdLblM">MINIT</div></div>
            <div class="cdBox"><div class="cdNum" id="cdS">00</div><div class="cdLbl" id="cdLblS">SAAT</div></div>
          </div>
          <div class="sub" id="cdHint"></div>
        </div>
      </div>

      <div class="card section" id="secMaklumat">
        <h2>Butiran Tambahan</h2>
        <div class="sub" id="extraInfo">Sila semak butiran di admin panel untuk tambah info seperti nama ibu bapa, dresscode, hadiah, parkir dan lain-lain.</div>
        <div style="margin-top:10px" class="sub">
          üé® Tema: <b id="themeName">Gold</b><br/>
          üé¨ Video: <b id="videoStatus">OFF</b><br/>
          üîí VIP: <b id="vipStatus">OFF</b><br/>
          üåê Bahasa: <b id="langStatus">BM</b>
        </div>
      </div>

      <div class="card section" id="secAturcara">
        <h2>Aturcara</h2>
        <div class="sub" id="scheduleText">Contoh: 11:00 pagi - Ketibaan tetamu ‚Ä¢ 12:30 tgh - Ketibaan pengantin ‚Ä¢ 2:00 ptg - Majlis tamat</div>
      </div>

      <div class="card section" id="secGaleri">
        <h2>Galeri</h2>
        <div class="sub" id="galleryText">Letak link album Google Drive/Instagram, atau senarai gambar dalam admin panel.</div>
      </div>

      <div class="card section" id="secRSVP">
        <h2>RSVP (Ringkas)</h2>
        <div class="sub" id="rsvpGuide">Klik ‚ÄúRSVP Sekarang‚Äù untuk WhatsApp. Anda juga boleh rekod kiraan di bawah.</div>
        <div class="actions" style="margin-top:12px">
          <button class="btn btnPrimary" id="btnHadlr">‚úÖ Saya Hadir</button>
          <button class="btn" id="btnTdkHadir">‚ùå Tidak Hadir</button>
          <button class="btn" id="btnResetRsvp">‚ôªÔ∏è Reset Kiraan</button>
        </div>
        <div class="sub" style="margin-top:10px">
          Kiraan (device ini): Hadir = <b id="rsvpYes">0</b> ‚Ä¢ Tidak hadir = <b id="rsvpNo">0</b>
        </div>
        <div class="note">*Kiraan ini simpan dalam phone/browser sahaja (localStorage).</div>
      </div>
    </div>
  </div>

  <!-- BOTTOM TABS -->
  <div class="tabs">
    <div class="tabBar">
      <button class="tab active" data-tab="Utama">Utama</button>
      <button class="tab" data-tab="Maklumat">Maklumat</button>
      <button class="tab" data-tab="Aturcara">Aturcara</button>
      <button class="tab" data-tab="Galeri">Galeri</button>
      <button class="tab" data-tab="RSVP">RSVP</button>
    </div>
  </div>

  <script>
    // =========================
    // STORAGE + DEFAULT DATA
    // =========================
    const KEY = "KADKAHWIN_DATA_V10";
    const RSVP_KEY = "KADKAHWIN_RSVP_V1";

    const DEFAULT_DATA = {
      // Language: "ms" or "en"
      lang: "ms",

      // Theme: gold / rose / emerald / midnight
      theme: "gold",

      // Video background
      videoOn: false,

      // VIP lock
      vipOn: false,
      vipCode: "VIP123",

      // Text content
      topTitle: "Kad Kahwin Digital",
      topSubtitle: "Jemputan Rasmi",
      badgeText: "WEDDING INVITATION",
      salutation: "Dato‚Äô/Datin/Tuan/Puan/Encik/Cik",
      title:"Walimatul Urus",
      couple:"Adam & Hawa",
      message:"Dengan penuh kesyukuran, kami menjemput anda hadir memeriahkan majlis perkahwinan kami.",
      date:"01/12/2025",
      time:"9.00am ‚Äì 2.00pm",
      venue:"Dewan Serbaguna",
      address:"Alamat ringkas majlis di sini",
      maps:"https://maps.google.com/",
      rsvp:"https://wa.me/60123456789?text=Assalamualaikum,%20saya%20nak%20RSVP",
      schedule:"11:00 pagi - Ketibaan tetamu ‚Ä¢ 12:30 tgh - Ketibaan pengantin ‚Ä¢ 2:00 ptg - Majlis tamat",
      gallery:"Letak link album atau info galeri di admin panel.",

      // Optional photo as base64 data url
      photoDataUrl: "",

      // Note / copyright
      copyright: "Notis: Dilarang guna/ jual page ini tanpa kebenaran pemilik."
    };

    function loadData(){
      try{
        const raw = localStorage.getItem(KEY);
        return raw ? Object.assign({}, DEFAULT_DATA, JSON.parse(raw)) : DEFAULT_DATA;
      }catch(e){ return DEFAULT_DATA; }
    }
    function saveData(d){
      localStorage.setItem(KEY, JSON.stringify(d));
    }

    const d = loadData();

    // =========================
    // THEME APPLY
    // =========================
    function applyTheme(theme){
      const root = document.documentElement;
      let accent = "#d6b36a", name="Gold";
      if(theme==="rose"){ accent="#e7a0a8"; name="Rose"; }
      if(theme==="emerald"){ accent="#4fd1a4"; name="Emerald"; }
      if(theme==="midnight"){ accent="#8aa3ff"; name="Midnight"; }
      root.style.setProperty("--accent", accent);
      document.getElementById("themeName").textContent = name;
    }
    applyTheme(d.theme);

    // =========================
    // VIDEO ON/OFF
    // =========================
    const v = document.getElementById("bgVideo");
    const videoStatus = document.getElementById("videoStatus");
    function setVideo(on){
      v.style.display = on ? "block" : "none";
      videoStatus.textContent = on ? "ON" : "OFF";
      if(on){
        v.muted = true;
        v.play().catch(()=>{ /* autoplay may be blocked; ignore */ });
      }else{
        try{ v.pause(); }catch(e){}
      }
    }
    setVideo(!!d.videoOn);

    // =========================
    // GUEST NAME (URL ?to=...)
    // =========================
    const qs = new URLSearchParams(location.search);
    const guestName = (qs.get("to") || qs.get("tetamu") || "").trim();
    const guestPill = document.getElementById("guestPill");
    const guestNameText = document.getElementById("guestNameText");
    if(guestName){
      guestPill.textContent = "üë§ " + guestName;
      guestNameText.textContent = guestName;
    }else{
      guestPill.textContent = "üë§ Tetamu";
      guestNameText.textContent = "Tetamu";
    }

    // =========================
    // VIP LOCK
    // =========================
    const vipLock = document.getElementById("vipLock");
    const vipStatus = document.getElementById("vipStatus");
    function checkVip(){
      vipStatus.textContent = d.vipOn ? "ON" : "OFF";
      if(!d.vipOn) return;

      const unlocked = sessionStorage.getItem("VIP_UNLOCKED") === "1";
      if(unlocked) return;

      vipLock.style.display = "flex";
    }
    document.getElementById("vipGoHomeBtn").onclick = () => { location.href = "index.html"; };
    document.getElementById("vipUnlockBtn").onclick = () => {
      const code = (document.getElementById("vipCodeInput").value || "").trim();
      if(code && code === d.vipCode){
        sessionStorage.setItem("VIP_UNLOCKED","1");
        vipLock.style.display = "none";
      }else{
        alert("Kod VIP tidak tepat.");
      }
    };
    checkVip();

    // =========================
    // CONTENT BIND
    // =========================
    const setText = (id, txt)=>{ const el=document.getElementById(id); if(el) el.textContent = txt || ""; };
    setText("topTitle", d.topTitle);
    setText("topSubtitle", d.topSubtitle);
    setText("badgeText", d.badgeText);
    setText("salutationText", "Yth. " + (d.salutation || DEFAULT_DATA.salutation));
    setText("invTitle", d.title);
    setText("invMsg", d.message);
    setText("invCouple", d.couple);
    setText("invDate", d.date);
    setText("invTime", d.time);
    setText("invVenue", d.venue);
    setText("invAddr", d.address);
    setText("scheduleText", d.schedule);
    setText("galleryText", d.gallery);
    setText("copyrightNote", d.copyright);

    // Photo
    const photoBox = document.getElementById("photoBox");
    const photoImg = document.getElementById("photoImg");
    if(d.photoDataUrl){
      photoImg.src = d.photoDataUrl;
      photoBox.style.display = "block";
    }else{
      photoBox.style.display = "none";
    }

    // Links
    const btnMaps = document.getElementById("btnMaps");
    const btnRsvp = document.getElementById("btnRsvp");
    btnMaps.onclick = () => { if(d.maps) window.open(d.maps,"_blank"); };
    btnRsvp.onclick = () => {
      // auto inject guest name into whatsapp text if exists
      if(!d.rsvp) return;
      let url = d.rsvp;
      if(guestName){
        // if whatsapp url contains "text=", append name if not already
        try{
          const u = new URL(url);
          const text = u.searchParams.get("text") || "";
          if(text && !text.includes(guestName)){
            u.searchParams.set("text", text + " (Tetamu: " + guestName + ")");
            url = u.toString();
          }
        }catch(e){}
      }
      window.open(url,"_blank");
    };

    // Add to Calendar (simple ICS via data URI)
    document.getElementById("btnCalendar").onclick = () => {
      // expects date dd/mm/yyyy
      const parts = (d.date||"").split("/");
      if(parts.length!==3){ alert("Format tarikh perlu DD/MM/YYYY"); return; }
      const [dd,mm,yyyy] = parts;
      // all-day event as safe default
      const dt = `${yyyy}${mm}${dd}`;
      const ics =
`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Kad Kahwin//MY
BEGIN:VEVENT
DTSTART;VALUE=DATE:${dt}
DTEND;VALUE=DATE:${dt}
SUMMARY:${(d.title||"Walimatul Urus")} - ${(d.couple||"")}
LOCATION:${(d.venue||"")} ${((d.address||"").replace(/\n/g," "))}
DESCRIPTION:${(d.message||"")}
END:VEVENT
END:VCALENDAR`;
      const blob = new Blob([ics], {type:"text/calendar;charset=utf-8"});
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "jemputan.ics";
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(()=>URL.revokeObjectURL(a.href), 8000);
    };

    // Share
    document.getElementById("btnShare").onclick = async () => {
      const base = location.origin + location.pathname; // invite.html path
      const shareUrl = guestName ? (base + "?to=" + encodeURIComponent(guestName)) : base;
      const shareText = (d.title||"Jemputan") + " - " + (d.couple||"");
      try{
        if(navigator.share){
          await navigator.share({title:shareText, text:shareText, url:shareUrl});
        }else{
          await navigator.clipboard.writeText(shareUrl);
          alert("Link disalin:\n" + shareUrl);
        }
      }catch(e){
        alert("Link:\n" + shareUrl);
      }
    };

    // =========================
    // LANGUAGE (BM/EN)
    // =========================
    const langStatus = document.getElementById("langStatus");
    function applyLang(lang){
      langStatus.textContent = (lang==="en") ? "EN" : "BM";
      if(lang!=="en") return;

      // minimal EN labels
      setText("topSubtitle","Official Invitation");
      setText("lblDate","Date"); setText("lblTime","Time"); setText("lblVenue","Venue"); setText("lblAddr","Address");
      setText("cdTitle","Countdown to the day");
      setText("cdLblD","DAYS"); setText("cdLblH","HRS"); setText("cdLblM","MIN"); setText("cdLblS","SEC");
      setText("rsvpGuide","Tap ‚ÄúRSVP‚Äù to WhatsApp. You can also track counts below.");
      setText("extraInfo","Use admin panel to add parents names, dress code, gifts, parking and more.");
      document.querySelectorAll(".tab").forEach(btn=>{
        const t = btn.dataset.tab;
        const map = {Utama:"Home", Maklumat:"Info", Aturcara:"Schedule", Galeri:"Gallery", RSVP:"RSVP"};
        btn.textContent = map[t] || btn.textContent;
      });
    }
    applyLang(d.lang);

    // =========================
    // COUNTDOWN
    // =========================
    const cdHint = document.getElementById("cdHint");
    function parseDateDDMMYYYY(s){
      const p = (s||"").split("/");
      if(p.length!==3) return null;
      const dd = parseInt(p[0],10), mm = parseInt(p[1],10), yy = parseInt(p[2],10);
      if(!dd||!mm||!yy) return null;
      return new Date(yy, mm-1, dd, 0, 0, 0, 0);
    }
    function tickCountdown(){
      const target = parseDateDDMMYYYY(d.date);
      if(!target){
        cdHint.textContent = "Set tarikh format DD/MM/YYYY di admin panel.";
        return;
      }
      const now = new Date();
      let diff = target.getTime() - now.getTime();
      if(diff <= 0){
        document.getElementById("cdD").textContent = "0";
        document.getElementById("cdH").textContent = "00";
        document.getElementById("cdM").textContent = "00";
        document.getElementById("cdS").textContent = "00";
        cdHint.textContent = (d.lang==="en") ? "Today is the day üéâ" : "Hari ini majlis üéâ";
        return;
      }
      const sec = Math.floor(diff/1000);
      const days = Math.floor(sec/86400);
      const hrs = Math.floor((sec%86400)/3600);
      const mins = Math.floor((sec%3600)/60);
      const secs = sec%60;
      document.getElementById("cdD").textContent = String(days);
      document.getElementById("cdH").textContent = String(hrs).padStart(2,"0");
      document.getElementById("cdM").textContent = String(mins).padStart(2,"0");
      document.getElementById("cdS").textContent = String(secs).padStart(2,"0");
      cdHint.textContent = (d.lang==="en")
        ? "See you soon ‚ú®"
        : "Jumpa nanti ‚ú®";
    }
    tickCountdown();
    setInterval(tickCountdown, 1000);

    // =========================
    // TABS
    // =========================
    const sections = {
      Utama: document.getElementById("secUtama"),
      Maklumat: document.getElementById("secMaklumat"),
      Aturcara: document.getElementById("secAturcara"),
      Galeri: document.getElementById("secGaleri"),
      RSVP: document.getElementById("secRSVP"),
    };
    document.querySelectorAll(".tab").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        document.querySelectorAll(".tab").forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        Object.values(sections).forEach(s=>s.classList.remove("active"));
        const key = btn.dataset.tab;
        if(sections[key]) sections[key].classList.add("active");
        window.scrollTo({top:0,behavior:"smooth"});
      });
    });

    // =========================
    // RSVP COUNTS (local)
    // =========================
    function loadRsvp(){
      try{
        const raw = localStorage.getItem(RSVP_KEY);
        return raw ? JSON.parse(raw) : {yes:0,no:0};
      }catch(e){ return {yes:0,no:0}; }
    }
    function saveRsvp(x){ localStorage.setItem(RSVP_KEY, JSON.stringify(x)); }
    function renderRsvp(x){
      document.getElementById("rsvpYes").textContent = x.yes||0;
      document.getElementById("rsvpNo").textContent = x.no||0;
    }
    let r = loadRsvp();
    renderRsvp(r);
    document.getElementById("btnHadlr").onclick = () => { r.yes=(r.yes||0)+1; saveRsvp(r); renderRsvp(r); alert("Terima kasih! Direkod: Hadir ‚úÖ"); };
    document.getElementById("btnTdkHadir").onclick = () => { r.no=(r.no||0)+1; saveRsvp(r); renderRsvp(r); alert("Terima kasih! Direkod: Tidak hadir ‚ùå"); };
    document.getElementById("btnResetRsvp").onclick = () => {
      if(confirm("Reset kiraan RSVP untuk device ini?")){
        r={yes:0,no:0}; saveRsvp(r); renderRsvp(r);
      }
    };
  </script>
</body>
</html>
