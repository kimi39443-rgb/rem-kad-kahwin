<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jemputan Majlis Perkahwinan</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- QR Code -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <style>
    :root{
      --bg:#0b0b0b;
      --card:#101214;
      --stroke: rgba(255,255,255,.10);
      --muted: rgba(255,255,255,.72);
      --muted2: rgba(255,255,255,.55);
      --accent:#d4af37;
      --accent2:#ffffff;
      --shadow: 0 24px 60px rgba(0,0,0,.55);
      --radius: 22px;
    }
    body{
      background: radial-gradient(1200px 700px at 20% -10%, rgba(212,175,55,.14), transparent 55%),
                  radial-gradient(900px 600px at 110% 10%, rgba(255,255,255,.07), transparent 50%),
                  radial-gradient(800px 600px at 40% 110%, rgba(212,175,55,.10), transparent 55%),
                  var(--bg);
      color:#fff;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }
    .glass{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }
    .chip{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      border-radius: 999px;
      padding: .35rem .65rem;
      font-size: .75rem;
      color: var(--muted2);
    }
    .btn{
      border-radius: 14px;
      padding: .80rem 1rem;
      font-weight: 600;
      letter-spacing: .02em;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      transition: transform .08s ease, opacity .15s ease, background .2s ease;
    }
    .btn:active{ transform: scale(.99); }
    .btn-primary{
      background: var(--accent);
      color: #0b0b0b;
      border-color: rgba(0,0,0,.12);
    }
    .input{
      border-radius: 14px;
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.25);
      padding: .85rem .95rem;
      outline: none;
      width: 100%;
      color: #fff;
    }
    .input::placeholder{ color: rgba(255,255,255,.45); }
    .divider{
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.12), transparent);
    }
    .qrWrap{
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.25);
      border-radius: 18px;
      padding: 12px;
      display: inline-flex;
      box-shadow: 0 16px 30px rgba(0,0,0,.35);
    }
    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(12px);
      color: rgba(255,255,255,.9);
      font-size: 13px;
      opacity: 0;
      pointer-events: none;
      transition: opacity .25s ease, transform .25s ease;
    }
    .toast.show{ opacity: 1; transform: translateX(-50%) translateY(-6px); }
    select{
      background: rgba(0,0,0,.25) !important;
      border: 1px solid var(--stroke) !important;
      color: rgba(255,255,255,.9) !important;
      border-radius: 999px !important;
      padding: .35rem .75rem !important;
      font-size: .8rem !important;
      outline: none !important;
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-4">
  <div class="w-full max-w-md glass p-6 md:p-7 space-y-5">
    <!-- Top bar -->
    <div class="flex items-center justify-between gap-3">
      <div class="flex items-center gap-2">
        <span class="chip" id="badge">Walimatul Urus</span>
        <span class="chip" id="verChip">v1</span>
      </div>

      <div class="flex items-center gap-2">
        <select id="verSel" title="Pilih Versi">
          <option value="1">Versi 1</option>
          <option value="2">Versi 2</option>
          <option value="3">Versi 3</option>
          <option value="4">Versi 4</option>
          <option value="5">Versi 5</option>
        </select>
      </div>
    </div>

    <!-- Header -->
    <div class="text-center space-y-2">
      <h1 class="text-3xl font-semibold tracking-tight" id="title">Walimatul Urus</h1>
      <p class="text-sm" style="color:var(--muted2)" id="subtitle">
        Dengan penuh kesyukuran, kami menjemput Datoâ€™/Datin/Tuan/Puan/Encik/Cik
      </p>
    </div>

    <!-- Names -->
    <div class="text-center space-y-2">
      <div class="text-lg font-medium" id="groom">ğŸ‘¨â€ğŸ’¼ Adam bin Ahmad</div>
      <div class="text-lg font-medium" id="bride">ğŸ‘©â€ğŸ’¼ Hawa binti Ali</div>
    </div>

    <div class="divider"></div>

    <!-- Details -->
    <div class="space-y-2 text-sm" style="color:var(--muted)">
      <div class="flex items-center justify-center gap-2" id="dateRow">ğŸ“… Sabtu, 12 Oktober 2025</div>
      <div class="flex items-center justify-center gap-2" id="timeRow">ğŸ•°ï¸ 11.00 pagi â€“ 4.00 petang</div>
      <div class="flex items-center justify-center gap-2" id="locRow">ğŸ“ Dewan Seri Melur</div>
    </div>

    <!-- Guest -->
    <div class="space-y-3">
      <input id="guest" class="input" placeholder="Nama tetamu" />
      <div class="grid grid-cols-2 gap-3">
        <button class="btn btn-primary" onclick="rsvp('Hadir')" id="btnHadir">Hadir</button>
        <button class="btn" onclick="rsvp('Tidak Hadir')" id="btnTidak">Tidak Hadir</button>
      </div>

      <div class="flex items-center justify-center gap-3 pt-1">
        <button class="btn text-xs px-3 py-2" onclick="copyLink()">Copy Link</button>
        <button class="btn text-xs px-3 py-2" onclick="openMap()">Buka Maps</button>
      </div>
    </div>

    <!-- QR -->
    <div class="text-center space-y-3 pt-1">
      <div class="qrWrap">
        <div id="qrcode"></div>
      </div>
      <p class="text-xs" style="color:var(--muted2)">
        Jemputan Digital â€¢ Mesra Telefon ğŸ“±
      </p>
    </div>

    <div class="divider"></div>

    <!-- Footer -->
    <div class="text-center text-xs" style="color:var(--muted2)">
      Â© R-E-M Digital Invitation
    </div>
  </div>

  <div class="toast" id="toast">OK</div>

  <script>
    /***********************
     *  âœ… SETUP ANDA
     ***********************/
    // 1) Tukar nombor WhatsApp (boleh letak lebih dari 1 nombor)
    // Format betul: 60 + nombor (tanpa +, tanpa space, tanpa dash)
    // Contoh: "60123456789"
    const WA_NUMBERS = [
      "601111661303"
    ];

    // 2) (OPTIONAL) Google Sheet webhook (kalau ada)
    // Kalau belum ada, BIAR KOSONG.
    const SHEET_WEBHOOK_URL = "";

    // 3) Lokasi Google Maps (tukar ikut dewan)
    const MAPS_URL = "https://www.google.com/maps/search/?api=1&query=Dewan%20Seri%20Melur";

    /***********************
     *  âœ… DATA MAJLIS
     ***********************/
    const EVENT = {
      title: "Walimatul Urus",
      subtitle: "Dengan penuh kesyukuran, kami menjemput Datoâ€™/Datin/Tuan/Puan/Encik/Cik",
      groom: "ğŸ‘¨â€ğŸ’¼ Adam bin Ahmad",
      bride: "ğŸ‘©â€ğŸ’¼ Hawa binti Ali",
      dateDisplay: "Sabtu, 12 Oktober 2025",
      timeDisplay: "11.00 pagi â€“ 4.00 petang",
      locationDisplay: "Dewan Seri Melur"
    };

    /***********************
     *  âœ… VERSI 1â€“5 (THEME)
     ***********************/
    const THEMES = {
      1: { // Premium Gold (default)
        badge: "Walimatul Urus",
        accent: "#d4af37",
        bg: "#0b0b0b",
        card: "#101214",
        stroke: "rgba(255,255,255,.10)"
      },
      2: { // Modern Neon
        badge: "Modern",
        accent: "#7CFFB2",
        bg: "#070A0F",
        card: "#0C111B",
        stroke: "rgba(124,255,178,.18)"
      },
      3: { // Minimal Mono
        badge: "Minimal",
        accent: "#ffffff",
        bg: "#0a0a0a",
        card: "#101010",
        stroke: "rgba(255,255,255,.12)"
      },
      4: { // Islamic Emerald
        badge: "Islamic",
        accent: "#35d0a6",
        bg: "#06110E",
        card: "#081a16",
        stroke: "rgba(53,208,166,.20)"
      },
      5: { // Royal Purple
        badge: "Royal",
        accent: "#b89bff",
        bg: "#090612",
        card: "#110b1f",
        stroke: "rgba(184,155,255,.20)"
      }
    };

    function setTheme(v){
      const t = THEMES[v] || THEMES[1];
      document.documentElement.style.setProperty("--accent", t.accent);
      document.documentElement.style.setProperty("--bg", t.bg);
      document.documentElement.style.setProperty("--card", t.card);
      document.documentElement.style.setProperty("--stroke", t.stroke);

      document.getElementById("badge").textContent = t.badge;
      document.getElementById("verChip").textContent = "v" + v;
    }

    function fillEvent(){
      document.getElementById("title").textContent = EVENT.title;
      document.getElementById("subtitle").textContent = EVENT.subtitle;
      document.getElementById("groom").textContent = EVENT.groom;
      document.getElementById("bride").textContent = EVENT.bride;
      document.getElementById("dateRow").textContent = "ğŸ“… " + EVENT.dateDisplay;
      document.getElementById("timeRow").textContent = "ğŸ•°ï¸ " + EVENT.timeDisplay;
      document.getElementById("locRow").textContent = "ğŸ“ " + EVENT.locationDisplay;
    }

    /***********************
     *  âœ… QR (URL page)
     ***********************/
    function buildQR(){
      const el = document.getElementById("qrcode");
      el.innerHTML = "";
      new QRCode(el, {
        text: window.location.href,
        width: 140,
        height: 140,
        colorDark: "#ffffff",
        colorLight: "transparent"
      });
    }

    /***********************
     *  âœ… UTIL
     ***********************/
    function toast(msg){
      const t = document.getElementById("toast");
      t.textContent = msg;
      t.classList.add("show");
      setTimeout(()=>t.classList.remove("show"), 1600);
    }

    function pickWAnumber(){
      // Round-robin simple ikut masa (kalau ada banyak nombor)
      if(!WA_NUMBERS.length) return "";
      const i = Math.floor(Date.now() / 1000) % WA_NUMBERS.length;
      return WA_NUMBERS[i];
    }

    function safeOpen(url){
      // Kadang popup block: fallback guna location.href
      const w = window.open(url, "_blank");
      if(!w) window.location.href = url;
    }

    /***********************
     *  âœ… RSVP (WHATSAPP + OPTIONAL SHEET)
     ***********************/
    async function sendToSheet(payload){
      if(!SHEET_WEBHOOK_URL) return;
      try{
        await fetch(SHEET_WEBHOOK_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });
      }catch(e){
        // diam sahaja (tak kacau flow WhatsApp)
      }
    }

    function rsvp(status){
      const guestEl = document.getElementById("guest");
      const guestName = (guestEl.value || "").trim();

      const msg =
`RSVP ${status}
Nama: ${guestName || "-"}
Majlis: ${EVENT.groom.replace("ğŸ‘¨â€ğŸ’¼ ","")} & ${EVENT.bride.replace("ğŸ‘©â€ğŸ’¼ ","")}
Tarikh: ${EVENT.dateDisplay}
Lokasi: ${EVENT.locationDisplay}`;

      const wa = pickWAnumber();
      if(!wa){
        toast("Nombor WhatsApp belum diisi");
        return;
      }

      // OPTIONAL: simpan ke Google Sheet
      sendToSheet({
        status,
        nama: guestName || "-",
        majlis: `${EVENT.groom} & ${EVENT.bride}`,
        tarikh: EVENT.dateDisplay,
        lokasi: EVENT.locationDisplay,
        url: window.location.href,
        time: new Date().toISOString()
      });

      const url = "https://wa.me/" + wa + "?text=" + encodeURIComponent(msg);
      toast("Buka WhatsAppâ€¦");
      safeOpen(url);
    }

    function copyLink(){
      const link = window.location.href;
      navigator.clipboard?.writeText(link).then(()=>{
        toast("Link disalin");
      }).catch(()=>{
        toast("Tak dapat copy");
      });
    }

    function openMap(){
      safeOpen(MAPS_URL);
    }

    /***********************
     *  âœ… INIT (v=1..5)
     ***********************/
    function getVersion(){
      const v = new URLSearchParams(window.location.search).get("v");
      const n = parseInt(v || "1", 10);
      if([1,2,3,4,5].includes(n)) return n;
      return 1;
    }

    const verSel = document.getElementById("verSel");
    const currentV = getVersion();
    verSel.value = String(currentV);

    verSel.addEventListener("change", (e)=>{
      const v = e.target.value;
      const url = new URL(window.location.href);
      url.searchParams.set("v", v);
      window.location.href = url.toString();
    });

    fillEvent();
    setTheme(currentV);
    buildQR();
  </script>
</body>
</html>
