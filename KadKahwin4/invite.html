
<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jemputan Majlis Perkahwinan</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- QR Code -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <style>
    :root{
      --bg:#07080a;
      --card: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.14);
      --glow: rgba(212,175,55,.25);
      --accent:#d4af37;
      --muted: rgba(255,255,255,.72);
    }
    body{
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(212,175,55,.10), transparent 55%),
        radial-gradient(900px 600px at 80% 30%, rgba(255,255,255,.06), transparent 55%),
        linear-gradient(180deg, #050608, #0a0b0e);
      color:#fff;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }
    .glass{
      background: var(--card);
      border: 1px solid var(--stroke);
      box-shadow: 0 20px 60px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.03) inset;
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }
    .btn{
      transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
    }
    .btn:active{ transform: scale(.98); }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-4">
  <div class="w-full max-w-md glass rounded-3xl p-6 text-center space-y-5">
    <div class="space-y-1">
      <p class="text-xs tracking-[0.35em] uppercase opacity-70">Walimatul Urus</p>
      <h1 class="text-2xl font-semibold tracking-wide">Jemputan Majlis Perkahwinan</h1>
      <p class="text-sm" style="color:var(--muted)">Dengan penuh kesyukuran, kami menjemput<br/>Datoâ€™ / Datin / Tuan / Puan / Encik / Cik</p>
    </div>

    <div class="space-y-1">
      <p class="text-lg font-medium">ğŸ‘¨â€ğŸ’¼ Adam bin Ahmad</p>
      <p class="text-lg font-medium">ğŸ‘©â€ğŸ’¼ Hawa binti Ali</p>
    </div>

    <div class="border-t border-white/10 pt-4 space-y-2 text-sm">
      <p>ğŸ“… Sabtu, 12 Oktober 2025</p>
      <p>ğŸ•š 11.00 pagi â€“ 4.00 petang</p>
      <p>ğŸ“ Dewan Seri Melur</p>
    </div>

    <!-- Auto Nama dari URL -->
    <div class="space-y-2">
      <label class="text-xs tracking-[0.25em] uppercase opacity-60">Nama Tetamu</label>
      <input id="guest" placeholder="Nama tetamu"
        class="w-full px-4 py-3 rounded-2xl bg-black/40 border border-white/10 text-white outline-none focus:border-white/25"
      />
    </div>

    <div class="flex gap-3">
      <button onclick="rsvp('Hadir')"
        class="btn flex-1 py-3 rounded-2xl font-semibold text-black shadow-lg"
        style="background: var(--accent); box-shadow: 0 10px 28px var(--glow);">
        Hadir
      </button>

      <button onclick="rsvp('Tidak Hadir')"
        class="btn flex-1 py-3 rounded-2xl font-semibold border border-white/20 bg-white/5">
        Tidak Hadir
      </button>
    </div>

    <div class="flex justify-center pt-2">
      <div id="qrcode"></div>
    </div>

    <p class="text-xs opacity-50">Jemputan Digital â€¢ Mesra Telefon ğŸ“±</p>
  </div>

  <script>
    /**********************
     * (5) MULTI NOMBOR
     **********************/
    // Letak nombor tanpa +, tanpa space, tanpa dash
    const WA_NUMBERS = [
      "601111661303",  // Pengantin / utama
      // "6012XXXXXXX", // Admin 1 (optional)
      // "6013XXXXXXX"  // Admin 2 (optional)
    ];

    /**********************
     * (2) GOOGLE SHEET WEBHOOK (Apps Script URL)
     * Isi selepas buat Apps Script (lihat langkah #2 bawah)
     **********************/
    const SHEET_WEBHOOK_URL = ""; // contoh: https://script.google.com/macros/s/XXXXX/exec

    /**********************
     * QR CODE
     **********************/
    new QRCode(document.getElementById("qrcode"), {
      text: window.location.href,
      width: 140,
      height: 140,
      colorDark: "#ffffff",
      colorLight: "transparent"
    });

    /**********************
     * (3) AUTO NAMA dari URL
     * Contoh link: .../invite.html?name=Ali%20Bin%20Abu
     **********************/
    function getParam(name){
      const url = new URL(window.location.href);
      return (url.searchParams.get(name) || "").trim();
    }
    const guestEl = document.getElementById("guest");
    const autoName = getParam("name") || getParam("nama");
    if(autoName) guestEl.value = autoName;

    /**********************
     * (1) MESEJ BEZA Hadir / Tidak Hadir
     **********************/
    function buildMessage(status, guestName){
      const header = (status === "Hadir") ? "âœ… RSVP HADIR" : "âŒ RSVP TIDAK HADIR";
      return `${header}
Nama: ${guestName || "-"}
Majlis: Adam & Hawa
Tarikh: 12 Oktober 2025
Lokasi: Dewan Seri Melur`;
    }

    /**********************
     * (2) Hantar ke Google Sheet
     **********************/
    function postToSheet(payload){
      if(!SHEET_WEBHOOK_URL) return; // kalau belum set, skip
      try{
        fetch(SHEET_WEBHOOK_URL, {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });
      }catch(e){}
    }

    /**********************
     * RSVP MAIN
     **********************/
    function rsvp(status){
      const guestName = (guestEl.value || "").trim();
      const msg = buildMessage(status, guestName);

      // (2) Log ke Google Sheet
      postToSheet({
        status,
        name: guestName || "-",
        event: "Adam & Hawa",
        date: "12 Oktober 2025",
        location: "Dewan Seri Melur",
        page: window.location.href,
        ts: new Date().toISOString()
      });

      // WhatsApp URL (utama)
      const primary = WA_NUMBERS[0];
      const url = "https://wa.me/" + primary + "?text=" + encodeURIComponent(msg);
      window.open(url, "_blank");

      // (5) Jika ada admin lain, buka juga (optional)
      if(WA_NUMBERS.length > 1){
        setTimeout(() => {
          const ok = confirm("Hantar juga RSVP kepada admin lain?");
          if(!ok) return;

          // buka satu-satu (pop-up blocker kadang-kadang)
          for(let i=1; i<WA_NUMBERS.length; i++){
            setTimeout(() => {
              const u = "https://wa.me/" + WA_NUMBERS[i] + "?text=" + encodeURIComponent(msg);
              window.open(u, "_blank");
            }, i * 600);
          }
        }, 300);
      }
    }
  </script>
</body>
</html>
